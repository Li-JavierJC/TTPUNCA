<!-- Contenedor de platillos de comida --> 
<section class="container-fluid" style="background-color:#FFC300">
  <nav class="navbar">
    <section class="container-fluid mt-0 barra">
      <a class="navbar-brand">
        <img src="vista/images/iconos/logo-a.png" height="80px">
      </a>
      <section class="d-flex">
        <article class="mt-3 me-2">
          <?php echo $_SESSION['usuario']?>
        </article>
        <article class="btn-group">
            <button type="button" class="btn btn-secondary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false"  style="background-color:#FFC300; border-color: #FFC300;">
              <i class="fas fa-user-circle user"></i>
            </button>
            <ul class="dropdown-menu dropdown-menu-end" style="background-color:#581845;">
              <li><a class="dropdown-item cerrar" href="Javascript:salir()" style="color:white;"><i class="fas fa-sign-out-alt m-1" ></i>Salir</a></li>
            </ul>
        </article>                
      </section>
    </section>
  </nav>
</section>
<section class="container-fluid">
    <section class="row">
        <article class="barra-lateral col-12 col-sm-auto" style="cursor:pointer;">
            <nav class="nav nav-pills menu d-flex d-sm-block justify-content-center flex-wrap"  aria-orientation="vertical">
                <a class="nav-link active" data-bs-toggle="pill" data-bs-target="#inicio" aria-selected="true"><i class="bi bi-house-fill"></i><span>Inicio</span></a>
                <a class="nav-link" data-bs-toggle="pill" data-bs-target="#usuario" aria-selected="false"><i class="fas fa-users"></i><span>Usuarios Registrados</span></a>
                <a class="nav-link" data-bs-toggle="pill" data-bs-target="#alumno" aria-selected="false"><i class="fas fa-user-graduate"></i><span>Alumnos Registrados</span></a>
                <a class="nav-link" data-bs-toggle="pill" data-bs-target="#consulta"  aria-selected="false"><i class="fas fa-database"></i><span>Platillos de alumnos</span></a>
                <a class="nav-link" data-bs-toggle="pill" data-bs-target="#consulta-platilloUsuarios"  aria-selected="false"><i class="fas fa-database"></i><span>Platillos de usuarios</span></a>
                <a class="nav-link" data-bs-toggle="pill" data-bs-target="#consulta-platilloAdministrador"  aria-selected="false"><i class="fas fa-database"></i><span>Platillos del administrador</span></a>
                <a class="nav-link" data-bs-toggle="pill" data-bs-target="#registrar" aria-selected="false"><i class="fas fa-plate-wheat"></i><span>Registrar Patillo</span></a>
                <a class="nav-link" data-bs-toggle="pill" data-bs-target="#registrar-alumnos" aria-selected="false"><i class="fas fa-id-card"></i><span>Registrar Alumno</span></a>
                <a class="nav-link" data-bs-toggle="pill" data-bs-target="#registrar-usuarios"  aria-selected="false"><i class="fas fa-user-plus"></i><span>Registar Usuario</span></a>
                <a class="nav-link" data-bs-toggle="pill" data-bs-target="#encuesta"  aria-selected="false"><i class="bi bi-ui-checks"></i><span>Encuesta</span></a>
            </nav>
        </article>
        <main class="main col">
            <section class="tab-content row justify-content-center align-content-center text-center" id="v-pills-tabContent">
                <section class="container-fluid tab-pane fade show active" id="inicio">
                    <article style="background-color: #061533; color:aliceblue; padding: 0.5%;">
                        <h3>Inicio</h3>
                    </article>
                    <section class="row p-2">
                        <section class="col-xl-3 col-md-6 mb-4 ">
                            <section class="card border-left-primary shadow h-100 py-2">
                                <section class="card-body">
                                    <article class="row no-gutters align-items-center">
                                        <article class="col mr-2">
                                            <article class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                                <p style="font-size: 15px;"><strong>Usuarios Registrados</strong></p>
                                            </article>
                                            <article class="h5 mb-0 font-weight-bold text-gray-800">
                                                <?php  echo $totalUsuario;?>
                                            </article>
                                        </article>
                                        <article class="col-auto">
                                            <i class="fas fa-users fa-2x text-gray-300"></i>
                                        </article>
                                    </article>
                                </section>
                            </section>
                        </section>                    
                        <section class="col-xl-3 col-md-6 mb-4 ">
                            <section class="card border-left-primary shadow h-100 py-2">
                                <section class="card-body">
                                    <article class="row no-gutters align-items-center">
                                       <article class="col mr-2">
                                            <article class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                                <p style="font-size: 15px;"><strong>Alumnos Registrados</strong></p>
                                            </article>
                                            <article class="h5 mb-0 font-weight-bold text-gray-800">
                                                <?php  echo $totalAlumno?>
                                            </article>
                                        </article>
                                        <article class="col-auto">
                                            <i class="fas fa-user-graduate fa-2x text-gray-300"></i>
                                        </article>
                                    </article>
                                </section>
                            </section>
                        </section>
                        <section class="col-xl-3 col-md-6 mb-4 ">
                            <section class="card border-left-primary shadow h-100 py-2">
                                <section class="card-body">
                                    <article class="row no-gutters align-items-center">
                                        <article class="col mr-2">
                                            <article class="text-xs font-weight-bold text-info  text-uppercase mb-1">
                                                <p style="font-size: 15px;"><strong>Platillos Publicados</strong></p>
                                            </article>
                                            <article class="h5 mb-0 font-weight-bold text-gray-800">
                                                <?php  echo $totalPlatillo;?>
                                            </article>
                                        </article>
                                        <article class="col-auto">
                                            <i class="fas fa-plate-wheat fa-2x text-gray-300"></i>
                                        </article>
                                    </article>
                                </section>
                            </section>
                        </section>
                        <section class="col-xl-3 col-md-6 mb-4 ">
                            <section class="card border-left-primary shadow h-100 py-2">
                                <section class="card-body">
                                    <article class="row no-gutters align-items-center">
                                       <article class="col mr-2">
                                            <article class="text-xs font-weight-bold text-info  text-uppercase mb-1">
                                                <p style="font-size: 15px; color: #00f700;"><strong>Visitantes</strong></p>
                                            </article>
                                            <article class="h5 mb-0 font-weight-bold text-gray-800">
                                                <?php  echo  $totalVisitante;?>
                                            </article>
                                        </article>
                                        <article class="col-auto">
                                            <i class="fas fa-people-roof fa-2x text-gray-300"></i>
                                        </article>
                                    </article>
                                </section>
                            </section>
                        </section>
                    </section>
                    <section class="row p-2">
                        <section class="container col-xl-8 col-md-6 mb-4">
                            <canvas id="grafica-visitas"></canvas>
                        </section>
                        <section class="col-xl-3 col-md-6 mb-4 " style="height:120px ;">
                            <section class="card border-left-primary shadow h-100 py-2">
                                <section class="card-body">
                                    <article class="row no-gutters align-items-center">
                                        <article class="col mr-2">
                                            <article class="text-xs font-weight-bold text-info  text-uppercase mb-1">
                                                <p style="font-size: 15px; color: #790844;"><strong>Visitas Totales</strong></p>
                                            </article>
                                            <article class="h5 mb-0 font-weight-bold text-gray-800">
                                                <?php  echo  $totalVisita;?>
                                            </article>
                                        </article>
                                        <article class="col-auto">
                                            <i class="fas fa-arrows-to-eye fa-2x text-gray-300"></i>
                                        </article>
                                    </article>
                                </section>
                            </section>
                        </section>
                    </section>
                </section>
                <section class="container-fluid tab-pane fade" id="usuario">
                    <article style="background-color: #061533; color:aliceblue; padding: 0.5%;">
                        <h3>Usuarios Registrados</h3>
                    </article>
                    <!-- Caja de busqueda del usuario-->
                    <article class="col-md-12 p-2 text-left mb-2">
                        <h5><b>Buscar</b></h5>
                        <input class="form-control me-2" type="text" id="busquedaUsuario" placeholder="Buscar..." autocomplete="off">
                    </article>
                    <section class="table-responsive" id="resultadoBuscarUsuario"></section>
                    <section class="table-responsive" id="consultaUsuarios">
                        
                        <table id="myTabl" class="table table-sm">
                            <thead class="table-dark">
                                <tr>
                                    <th scope="col">Número</th>
                                    <th scope="col">Nombre</th>
                                    <th scope="col">Apellidos</th>
                                    <th scope="col">Sexo</th>
                                    <th scope="col">Escolaridad</th>
                                    <th scope="col">Ocupación</th>
                                    <th scope="col">Domicilio</th>
                                    <th scope="col">Edad</th>
                                    <th scope="col">Usuario</th>
                                    <th scope="col" colspan="2">Opciones</th>
                                </tr>
                            </thead>
                            <tbody>
                                <?php 
                                    $contador = 1; // Inicializar el contador a 1
                                    foreach($listaUsuarios as $usuario) { 
                                        printf('<tr>');
                                            printf('<td>%d</td>', $contador); // Mostrar el número secuencial en lugar del id    
                                            printf('<td>%s</td>', $usuario->getNombre());
                                            printf('<td>%s</td>', $usuario->getApellidos());
                                            printf('<td>%s</td>', $usuario->getSexo());
                                            printf('<td>%s</td>', $usuario->getEscolaridad());
                                            printf('<td>%s</td>', $usuario->getOcupacion());
                                            printf('<td>%s</td>', $usuario->getDomicilio());
                                            printf('<td>%s</td>', $usuario->getEdad());
                                            printf('<td>%s</td>', $usuario->getUsuario());
                                            printf('<td id="contrasena-g">%s</td>', $usuario->getContrasena());

                                            printf('<td><a class="text-success editbtn" style="cursor:pointer;" data-bs-toggle="modal" data-bs-target="#editarUsuario" data-userid="%d"><i class="bi bi-pencil-square"></i></a></td>', $usuario->getId());

                                            printf('<td><a  class="text-danger" href="Javascript:eliminarUsuario(%d)"><i class="bi bi-trash-fill"></i></a></td>', $usuario->getId());
                                        printf('</tr>');
                                        $contador++; // Incrementar el contador en cada iteración
                                    } 
                                ?>
                            </tbody>
                        </table>
                    </section>
                    <!--- ------------------Modal de mofificar datos del usuario ------------------------------------------------>
                    <section class="modal fade" id="editarUsuario" tabindex="-1" aria-hidden="true">
                        <section class="modal-dialog">
                            <section class="modal-content">
                                <article class="modal-header"  style="background: #FF5F6D;
                                    background: -webkit-linear-gradient(to right, #FFC371, #FF5F6D); 
                                    background: linear-gradient(to right, #FFC371, #FF5F6D);
                                    color:white;">
                                    <h5 class="modal-title w-100 text-center" style="font-weight:bold;" >Editar Usuario</h5>
                                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                                </article>
                                <section class="modal-body" style="font-weight: bold; color: #20B2AA;">
                                    <form class="row g-3 needs-validation" action="admin" method="post" >
                                        <input type="hidden" name="id" id="idUpdate" >
                                        <article class="col-md-6">
                                            <label for="nombre" class="form-label"><i class="bi bi-person-fill"></i> &nbsp;Nombre</label>
                                            <input type="text" class="form-control" id="nombre" name="nombre" required> 
                                        </article>
                                        <article class="col-md-6">
                                            <label for="apellidos" class="form-label"><i class="bi bi-people-fill"></i> &nbsp;Apellidos</label>
                                            <input type="text" class="form-control" id="apellidos" name="apellidos" required> 
                                        </article>
                                        <article class="col-md-6">
                                            <label for="sexo" class="form-label"><i class="bi bi-person-check-fill"></i> &nbsp;Sexo</label>
                                            <select  class="form-select" id="sexo" name="sexo" required>
                                                <option value="" selected="selected">Seleccione...</option>
                                                <option value="Hombre">Hombre</option>
                                                <option value="Mujer">Mujer</option>
                                            </select>
                                        </article>
                                        <article class="col-md-6">
                                            <label for="escolaridad" class="form-label"><i class="fas fa-graduation-cap"></i>&nbsp;Escolaridad</label>
                                            <select class="form-select" name="escolaridad" id="escolaridad"  required>
                                                <option value="" selected="selected" >Seleccione...</option>
                                                <option value="Ninguna">Ninguna</option>
                                                <option value="Preescolar">Preescolar</option>
                                                <option value="Primaria">Primaria</option>
                                                <option value="Secundaria">Secundaria</option>
                                                <option value="Bachillerato">Bachillerato</option>
                                                <option value="Licenciatura">Licenciatura</option>
                                                <option value="Posgrado">Posgrado</option>
                                            </select>
                                        </article>
                                        <article class="col-md-6">
                                            <label for="ocupacion" class="form-label"><i class="fa-solid fa-briefcase"></i>&nbsp;Ocupacion</label>
                                            <input type="text" class="form-control" name="ocupacion" id="ocupacion" required>
                                        </article>
                                        <article class="col-md-6">
                                            <label for="domicilio" class="form-label"><i class="bi bi-house-fill"></i>&nbsp;Domicilio</label>
                                            <input type="text" class="form-control" name="domicilio" id="domicilio" required>
                                        </article>
                                        <article class="col-md-6">
                                            <label for="edad" class="form-label"><i class="fa-solid fa-calendar-check"></i>&nbsp;Edad</label>
                                            <input type="text" class="form-control" name="edad" id="edad" required>
                                        </article>
                                        <article class="col-md-6">
                                            <label for="usuario" class="form-label"><i class="bi bi-person-circle"></i>&nbsp;Usuario</label> 
                                            <input type="text" class="form-control" name="usuario" id="usuario1"  required>
                                        </article>
                                        <article class="col-md-6">
                                            <label for="contrasena" class="form-label"><i class="fa-solid fa-key"></i>&nbsp;Cotraseña</label> 
                                            <input type="password" class="form-control" name="contrasena" id="contrasena"  required>
                                        </article>
                                        <article class="modal-footer" style="background-color: #74AECA1A;">
                                            <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
                                            <button type="submit" class="btn btn-success" name="editarUsuario" value="editarUsuario">Guardar Cambios</button>
                                        </article>
                                    </form>
                                </section>
                            </section>
                        </section>
                    </section>
                    <!----------------------------Eliminar usuario----------------------------------------- -->
                    <form name="eliminarForm" method="post" action="">
                        <input type="hidden" name="idUsuario" value="-1">
                    </form>
                </section>
                <section class="container-fluid tab-pane fade " id="alumno">
                    <article style="background-color: #061533; color:aliceblue; padding: 0.5%;">
                        <h3>Alumnos Registrados</h3>
                    </article>
                    <!-- Caja de busqueda del alumno-->
                    <article class="col-md-12 p-2 text-left mb-2">
                        <h5><b>Buscar</b></h5>
                        <input class="form-control me-2" type="text" id="busquedaAlumno" placeholder="Buscar..." autocomplete="off">
                    </article>
                    <section class="table-responsive" id="resultadoBuscarAlumno"></section>
                    <section class="table-responsive" id="consultaAlumnos">
                        <table class="table table-hover table-sm">
                            <thead class="table-dark">
                                <tr>
                                    <th scope="col">Número</th>
                                    <th scope="col">Nombre</th>
                                    <th scope="col">Apellidos</th>
                                    <th scope="col">Sexo</th>
                                    <th scope="col">Semestre</th>
                                    <th scope="col">Carrera</th>
                                    <th scope="col">Edad</th>
                                    <th scope="col">Usuario</th>
                                    <th scope="col" colspan="2">Opciones</th>
                                </tr>
                            </thead>
                            <tbody id="resultadoAlumno">
                                <?php
                                    $contador = 1; // Inicializar el contador a 1
                                    foreach($listaAlumnos as $alumno) { 
                                        printf('<tr>');
                                              
                                            printf('<td>%d</td>', $contador); // Mostrar el número secuencial en lugar del id 
                                            printf('<td>%s</td>', $alumno->getNombre());
                                            printf('<td>%s</td>', $alumno->getApellidos());
                                            printf('<td>%s</td>', $alumno->getSexo());
                                            printf('<td>%s</td>', $alumno->getSemestre());
                                            printf('<td>%s</td>', $alumno->getCarrera());
                                            printf('<td>%s</td>', $alumno->getEdad());
                                            printf('<td>%s</td>', $alumno->getUsuario());
                                            printf('<td id="contrasena-a">%s</td>', $alumno->getContrasena());

                                            printf('<td><a class="text-success editAlumno" style="cursor:pointer;" data-bs-toggle="modal" data-bs-target="#editarAlumno" data-alumnoid="%d"><i class="bi bi-pencil-square"></i></a></td>', $alumno->getId());


                                            printf('<td><a class="text-danger"  href="Javascript:eliminarAlumno(%d)"><i class="bi bi-trash-fill"></i></a></td>', $alumno->getId());
                                        printf('</tr>');
                                         $contador++; // Incrementar el contador en cada iteración
                                    } 
                                ?>
                            </tbody>
                        </table>
                    </section>
                    <!--- ------------------Modal de mofificar datos del Alumno ------------------------------------------------>
                    <section class="modal fade" id="editarAlumno" tabindex="-1" aria-hidden="true">
                        <section class="modal-dialog">
                            <section class="modal-content">
                                <article class="modal-header" style="background: #FF5F6D;
                                    background: -webkit-linear-gradient(to right, #FFC371, #FF5F6D); 
                                    background: linear-gradient(to right, #FFC371, #FF5F6D);
                                    color:white;">
                                    <h5 class="modal-title w-100 text-center" style="font-weight:bold;">Editar Alumno</h5>
                                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                                </article>
                                <section class="modal-body" style="font-weight:bold; color: #20B2AA;">
                                    <form class="row g-3 needs-validation" action="admin" method="post" >
                                        <input type="hidden" name="idalum" id="idAlum" >
                                        <article class="col-md-6">
                                            <label for="nombre" class="form-label"><i class="bi bi-person-fill"></i> &nbsp;Nombre</label>
                                            <input type="text" class="form-control" id="nombre-alumno" name="nombre"  required> 
                                        </article>
                                        <article class="col-md-6">
                                            <label for="apellidos" class="form-label"><i class="bi bi-people-fill"></i> &nbsp;Apellidos</label>
                                            <input type="text" class="form-control" id="apellidos-alumno" name="apellidos"  required>     
                                        </article>
                                        <article class="col-md-6">
                                            <label for="sexo" class="form-label"><i class="bi bi-person-check-fill"></i> &nbsp;Sexo</label>
                                            <select  class="form-select" id="sexo-alumno" name="sexo" required>
                                                <option value="" selected="selected">Seleccione...</option>
                                                <option value="Hombre">Hombre</option>
                                                <option value="Mujer">Mujer</option>
                                            </select>
                                        </article>
                                        <article class="col-md-6">
                                            <label for="semestre" class="form-label"><i class="fas fa-graduation-cap"></i>&nbsp;Semestre</label>
                                            <select class="form-select" name="semestre" id="semestre-alumno"  required>
                                                <option value="" selected="selected" >Seleccione...</option>
                                                <option value="Primero">Primero</option>
                                                <option value="Segundo">Segundo</option>
                                                <option value="Tercero">Tercero</option>
                                                <option value="Cuarto">Cuarto</option>
                                                <option value="Quinto">Quinto</option>
                                                <option value="Sexto">Sexto</option>
                                                <option value="Séptimo">Séptimo</option>
                                                <option value="Octavo">Octavo</option>
                                                <option value="Noveno">Noveno</option>
                                                <option value="Décimo">Décimo</option>
                                            </select>
                                        </article>
                                        <article class="col-md-6">
                                            <label for="carrera" class="form-label"><i class="fas fa-graduation-cap"></i>&nbsp;Carrera</label>
                                            <select class="form-select" name="carrera" id="carrera-alumno"  required>
                                                <option value="" selected="selected" >Seleccione...</option>
                                                <option value="Licenciatura en Nutrición">Licenciatura en Nutrición</option>
                                                <option value="Ingeniería en Alimentos">Ingeniería en Alimentos</option>
                                                <option value="Ingeniería en Agroindustrias">Ingeniería en Agroindustrias</option>
                                            </select>
                                        </article>
                                        <article class="col-md-6">
                                            <label for="edad" class="form-label"><i class="fa-solid fa-calendar-check"></i>&nbsp;Edad</label>
                                            <input type="text" class="form-control" name="edad" id="edad-alumno" required>
                                        </article>
                                        <article class="col-md-6">
                                            <label for="usuario" class="form-label"><i class="bi bi-person-circle"></i>&nbsp;Usuario</label> 
                                            <input type="text" class="form-control" name="usuario" id="usuario-alumno"  required>
                                        </article>
                                        <article class="col-md-6">
                                            <label for="contrasena" class="form-label"><i class="fa-solid fa-key"></i>&nbsp;Cotraseña</label>
                                            <input type="password" class="form-control" name="contrasena" id="contrasena-alumno"  required>
                                        </article>

                                        <article class="modal-footer" style="background-color: #74AECA1A;">
                                            <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
                                            <button type="submit" class="btn btn-success" name="editarAlumn" value="editarAlumn">Guardar Cambios</button>
                                        </article>
                                    </form>
                                </section>
                            </section>
                        </section>
                    </section>
                    <!----------------------------Eliminar Alumno----------------------------------------- -->
                    <form name="eliminarAlum" method="post" action="">
                        <input type="hidden" name="idAlumno" value="-1">
                    </form>
                </section>
                <section class="tab-pane fade " id="consulta">
                    <article style="background-color: #061533; color:aliceblue; padding: 0.5%;">
                        <h3>Platillos publicados por alumnos</h3>
                    </article>
                    <!-- Caja de busqueda del alumno-->
                    <article class="col-md-12 p-2 text-left mb-2"> 
                        <h5><b>Buscar</b></h5>
                        <input class="form-control me-2" type="text" id="busquedaPlatillo" placeholder="Buscar..." autocomplete="off">
                    </article>
                    <section class="table-responsive" id="resultadoBuscarPlatillo"></section>
                    <section class="table-responsive" id="consultaPlatillos">
                        <table class="table table-hover table-xl">
                          <thead class="table text-white" style="background-color:#1e0121;">
                            <tr>
                                <th scope="col">Número</th>
                                <th scope="col">Nombre</th>
                                <th scope="col">Imagen</th>
                                <th scope="col">Estado de validación</th>
                                <th scope="col" colspan="2">Opciones</th>
                              </tr>
                          </thead>
                          <tbody>
                            <?php
                              $contador = 1; // Inicializar el contador a 1
                              foreach($listaPlatillosAlumnos as $platillo) { 
                                printf('<tr>');
                                  printf('<td>%d</td>', $contador); // Mostrar el número secuencial en lugar del id 
                                  printf('<td>%s</td>', $platillo->getNombre());
                                  printf('<td>'.'<img src ="data:image/png;base64,'.base64_encode($platillo->getImagen()).'" width="50px" height="50px"/>'.'</td>');                         
                                  printf('
                                      <td>
                                          <a class="text-primary" href="#" onclick="verModal(%d)" data-bs-toggle="modal" data-bs-target="#verEstado" style="text-decoration: none;">
                                              <article class="container">
                                                  <center>
                                                      <p class="p-1 col-md-6 rounded text-white text-break small" style="background-color:#51CAE3;"><strong>Ver</strong>&nbsp;<i class="bi bi-eye-fill"></i></p>
                                                  </center>
                                              </article>
                                          </a>
                                      </td>
                                  ', $platillo->getId());
                                  printf('<td><a class="btn btn-success text-white p-1 rounded d-inline-flex align-items-center"  href="Javascript:validarPlatilloAlumno(%d)" style="text-decoration:none;">Validar&nbsp;<i class="bi bi-check2-circle"></i></a></td>', $platillo->getId());                                                 
                                  printf('<td><a class="eliminar-platillo bg-danger text-white p-1 rounded d-inline-flex align-items-center" data-platillo-id="%d" href="#" style="text-decoration: none;">Eliminar&nbsp;<i class="bi bi-trash-fill ml-1"></i></a></td>', $platillo->getId());
                                             
                                printf('</tr>');
                                $contador++; // Incrementar el contador en cada iteración
                              } 
                            ?>
                          </tbody>
                        </table>
                         <!-- Modal -->
                        <section class="modal fade" id="verEstado" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                          <section class="modal-dialog modal-dialog-centered ">
                            <section class="modal-content">
                              <section class="modal-header" style="background-color: #09386A; color: white;">
                                <h1 class="modal-title fs-5 w-100 text-center" id="exampleModalLabel">Estados de validación del platillo</h1>
                                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                              </section>
                              <section class="modal-body">
                                <section class="container">
                                  <section id="resultadoEstado">
                                  </section>
                                </section>
                              </section>
                              <section class="modal-footer">
                                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
                              </section>
                            </section>
                          </section>
                        </section>
                    </section>
                    <form name="eliminarPlato" method="post" action="">
                        <input type="hidden" name="idPlatillo" value="-1">
                    </form>
                    <!----------------------------Comentario de Platillo----------------------------------------- -->
                    <form name="comentarioForm" method="post" action="">
                        <input type="hidden" name="idComentario">
                    </form>
                </section>
                <section class="tab-pane fade " id="consulta-platilloUsuarios">
                    <article style="background-color: #061533; color:aliceblue; padding: 0.5%;">
                        <h3>Platillos publicados por usuarios</h3>
                    </article>
                    <!-- Caja de busqueda del alumno-->
                    <article class="col-md-12 p-2 text-left mb-2">
                        <h5><b>Buscar</b></h5>
                        <input class="form-control me-2" type="text" id="busquedaPlatilloUsuario" placeholder="Buscar..." autocomplete="off">
                    </article>
                    <section class="table-responsive" id="resultadoBuscarPlatilloUsuario"></section>
                    <section class="table-responsive" id="consultaPlatillosUsuarios">
                        <table class="table table-hover table-xl">
                          <thead class="table text-white" style="background-color:#1e0121;">
                            <tr>
                                <th scope="col">Número</th>
                                <th scope="col">Nombre</th>
                                <th scope="col">Imagen</th>
                                <th scope="col">Estado de validación</th>
                                <th scope="col" colspan="2">Opciones</th>
                              </tr>
                          </thead>
                          <tbody>
                            <?php
                              $contador = 1; // Inicializar el contador a 1
                              foreach($listaPlatillosUsuarios as $platillo) { 
                                printf('<tr>');
                                  printf('<td>%d</td>', $contador); // Mostrar el número secuencial en lugar del id 
                                  printf('<td>%s</td>', $platillo->getNombre());
                                  printf('<td>'.'<img src ="data:image/png;base64,'.base64_encode($platillo->getImagen()).'" width="50px" height="50px"/>'.'</td>');                         
                                  printf('
                                      <td>
                                          <a class="text-primary" href="#" onclick="verModalUsuario(%d)" data-bs-toggle="modal" data-bs-target="#verEstadoUsuario" style="text-decoration: none;">
                                              <article class="container">
                                                  <center>
                                                      <p class="p-1 col-md-6 rounded text-white text-break small" style="background-color:#51CAE3;"><strong>Ver</strong>&nbsp;<i class="bi bi-eye-fill"></i></p>
                                                  </center>
                                              </article>
                                          </a>
                                      </td>
                                  ', $platillo->getId());
                                  printf('<td><a class="btn btn-success text-white p-1 rounded d-inline-flex align-items-center"  href="Javascript:validarPlatilloUsuario(%d)" style="text-decoration:none;">Validar&nbsp;<i class="bi bi-check2-circle"></i></a></td>', $platillo->getId());                                                 
                                  printf('<td><a class="eliminar-platillo bg-danger text-white p-1 rounded d-inline-flex align-items-center" data-platillo-id="%d" href="#" style="text-decoration: none;">Eliminar&nbsp;<i class="bi bi-trash-fill ml-1"></i></a></td>', $platillo->getId());
                                             
                                printf('</tr>');
                                $contador++; // Incrementar el contador en cada iteración
                              } 
                            ?>
                          </tbody>
                        </table>
                         <!-- Modal -->
                        <section class="modal fade" id="verEstadoUsuario" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                          <section class="modal-dialog modal-dialog-centered ">
                            <section class="modal-content">
                              <section class="modal-header" style="background-color: #09386A; color: white;">
                                <h1 class="modal-title fs-5 w-100 text-center" id="exampleModalLabel">Estados de validación del platillo</h1>
                                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                              </section>
                              <section class="modal-body">
                                <section class="container">
                                  <section id="resultadoEstadoUsuario">
                                  </section>
                                </section>
                              </section>
                              <section class="modal-footer">
                                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
                              </section>
                            </section>
                          </section>
                        </section>
                    </section>
                    <form name="eliminarPlato" method="post" action="">
                        <input type="hidden" name="idPlatillo" value="-1">
                    </form>
                    <!----------------------------Comentario de Platillo----------------------------------------- -->
                    <form name="comentarioForm" method="post" action="">
                        <input type="hidden" name="idComentario">
                    </form>
                </section>
                <section class="tab-pane fade " id="consulta-platilloAdministrador">
                    <article style="background-color: #061533; color:aliceblue; padding: 0.5%;">
                        <h3>Platillos publicados por el admistrador</h3>
                    </article>
                    <!-- Caja de busqueda de platillos publicados por el administrador-->
                    <article class="col-md-12 p-2 text-left mb-2">
                        <h5><b>Buscar</b></h5>
                        <input class="form-control me-2" type="text" id="busquedaPlatilloAdmin" placeholder="Buscar..." autocomplete="off">
                    </article>
                    <section class="table-responsive" id="resultadoBuscarPlatilloAdmin"></section>
                    <section class="table-responsive" id="consultaPlatillosAdmin">
                        <table class="table table-hover table-xl">
                          <thead class="table text-white" style="background-color:#1e0121;">
                            <tr>
                                <th scope="col">Número</th>
                                <th scope="col">Nombre</th>
                                <th scope="col">Imagen</th>
                                <th scope="col" colspan="2">Opciones </th>
                              </tr>
                          </thead>
                          <tbody>
                            <?php
                              $contador = 1; // Inicializar el contador a 1
                              foreach($listaPlatillosAdministrador as $platillo) { 
                                printf('<tr>');
                                  printf('<td>%d</td>', $contador); // Mostrar el número secuencial en lugar del id 
                                  printf('<td>%s</td>', $platillo->getNombre());
                                  printf('<td>'.'<img src ="data:image/png;base64,'.base64_encode($platillo->getImagen()).'" width="50px" height="50px"/>'.'</td>');                         
                                  printf('<td><a class="btn btn-success text-white p-1 rounded d-inline-flex align-items-center"  href="Javascript:editarPlatilloAdministrador(%d)" style="text-decoration:none;">Actualizar&nbsp;<i class="bi bi-arrow-repeat ml-1" ></i></a></td>', $platillo->getId());                                                 
                                  printf('<td><a class="eliminar-platillo bg-danger text-white p-1 rounded d-inline-flex align-items-center" data-platillo-id="%d" href="#" style="text-decoration: none;">Eliminar&nbsp;<i class="bi bi-trash-fill ml-1"></i></a></td>', $platillo->getId());
                                             
                                printf('</tr>');
                                $contador++; // Incrementar el contador en cada iteración
                              } 
                            ?>
                          </tbody>
                        </table>
                    </section>
                    <form name="eliminarPlato" method="post" action="">
                        <input type="hidden" name="idPlatillo" value="-1">
                    </form>
                    <!----------------------------Comentario de Platillo----------------------------------------- -->
                    <form name="comentarioForm" method="post" action="">
                        <input type="hidden" name="idComentario">
                    </form>
                </section>
               
                <section class="tab-pane fade " id="registrar">
          <article style="background-color: #0C2233; color:aliceblue; padding: 0.5%;">
            <article class="row">
              <article class="col-md-8">
                <h3>Registrar Platillo</h3>
              </article>
              <article class="col-md-4">
                <h4><i class="bi bi-info-circle-fill " data-bs-toggle="modal" data-bs-target="#modalInstrucciones" style="cursor:pointer;">&nbsp;Instrucciones</i> </h4>
              </article>
            </article>
          </article>
          <!-- Modal de instrucciones para el registro del platillo -->
          <section class="modal fade" id="modalInstrucciones" tabindex="-1" aria-hidden="true">
            <section class="modal-dialog modal-lg">
              <section class="modal-content">
                <header class="modal-header text-white" style="background-color: #087c9f;">
                  <h5 class="w-100 text-center fw-bold">Instrucciones</h5>
                  <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </header>
                <article class="modal-body">
                  <div class="container">
                    <div class="card shadow">
                      <div class="card-body">
                        <h5 class="card-title  text-white p-2 rounded" style="background-color: #900C3F;">Instrucciones de Registro</h5>
                        <ul class="list-group list-group-flush text-start">
                          <li class="list-group-item">
                            <strong>1. Registro de Datos:</strong> Completa los formularios de cada sección.
                          </li>
                          <li class="list-group-item">
                            <strong>2. Guardar:</strong> Al completar un formulario, haz clic en el botón <strong class="text-info">Guardar</strong>.
                          </li>
                          <li class="list-group-item">
                            <strong>3. Validación:</strong> Si hay errores de validación, verifica que todos los campos estén completos.
                          </li>
                          <li class="list-group-item">
                            <strong>4. Éxito:</strong> Si los datos se guardaron correctamente, verás un mensaje de <strong class="text-success">Datos guardados correctamente</strong>.
                          </li>
                          <li class="list-group-item">
                            <strong>5. Repite:</strong> Repite el proceso para todas las secciones.
                          </li>
                          <li class="list-group-item">
                            <strong>6. Finalizar:</strong> Después de completar todas las secciones, haz clic en la pestaña <strong class="text-info">Finalizar</strong>.
                          </li>
                          <li class="list-group-item">
                            <strong>7. Confirmar:</strong> Luego, haz clic en el botón <strong class="text-primary">Finalizar y guardar todo</strong>. Espera y confirma el mensaje de <strong class="text-success">Registro completado</strong>, luego haz clic en <strong>Aceptar</strong>.
                          </li>
                          <li class="list-group-item">
                            <strong>8. Campos Incompletos:</strong> Si faltan campos por completar, verás un mensaje indicando que debes llenar todos los formularios.
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </article>
                <article class="modal-footer" style="background-color: #fafaff;">
                  <button type="button" class="btn  btn-info text-white" data-bs-dismiss="modal">Cerrar</button>
                </article>
              </section>
            </section>
          </section>
          <section class="container-fluid font-weight-bold p-3"  style="color: #072b39; background-color:#f9f9f9; border-right:#00dbff 8px  solid; border-radius: 5px;">
            <nav>
              <section class="nav nav-tabs" id="nav-tab" role="tablist">
                <button class="nav-link active" id="nav-datos-tab" data-bs-toggle="tab" data-bs-target="#nav-datos" type="button" role="tab" aria-controls="nav-datos" aria-selected="true">Datos del platillo</button>
                <button class="nav-link" id="nav-ingredientes-tab" data-bs-toggle="tab" data-bs-target="#nav-ingredientes" type="button" role="tab" aria-controls="nav-ingredientes" aria-selected="false">Ingredientes</button>
                <button class="nav-link" id="nav-utencilios-tab" data-bs-toggle="tab" data-bs-target="#nav-utencilios" type="button" role="tab" aria-controls="nav-utencilios" aria-selected="false">Utencilios</button>
                <button class="nav-link" id="nav-preparacion-tab" data-bs-toggle="tab" data-bs-target="#nav-preparacion" type="button" role="tab" aria-controls="nav-preparacion" aria-selected="false">Preparación</button>
                <button class="nav-link" id="nav-nutriente-tab" data-bs-toggle="tab" data-bs-target="#nav-nutriente" type="button" role="tab" aria-controls="nav-nutriente" aria-selected="false">Información nutrimental</button>
                <button class="nav-link" id="nav-complemento-tab" data-bs-toggle="tab" data-bs-target="#nav-complemento" type="button" role="tab" aria-controls="nav-complemento" aria-selected="false">Información adicional</button>
                <button class="nav-link" id="nav-finalizar-tab" data-bs-toggle="tab" data-bs-target="#nav-finalizar" type="button" role="tab" aria-controls="nav-finalizar" aria-selected="false">Finalizar</button>
              </section>
            </nav>
            <main class="tab-content" id="nav-tabContent">
              <section class="tab-pane fade show active" id="nav-datos" role="tabpanel" aria-labelledby="nav-datos-tab" tabindex="0">
                <!-- Sección 1: Datos del -->
                <section id="section1" class="mt-1">
                  <header class="p-1" style="background-color: #00b1ce; color:white; border-radius:5px;">
                    <h4>Sección 1: Datos del platillo</h4>
                  </header>
                  <form id="formDatosP" class="row g-3 needs-validation"  method="POST"  enctype="multipart/form-data">
                    <article class="col-md-6">
                      <label for="nombrePlatillo" class="form-label">Nombre</label>
                      <input type="text" class="form-control" name="nombrePlatillo" id="nombrePlatillo" placeholder="Gelatina de Durazno" required>
                    </article>
                    <article class="col-md-6">
                      <label for="tiempoComida" class="form-label">Tiempo de Comida</label>
                      <select class="form-select text-center" name="tiempoComida" id="tiempoComida" required>
                        <option value="">-- Seleccione --</option>
                        <option value="1">Desayuno</option>
                        <option value="2">Colación de la mañana</option>
                        <option value="3">Comida</option>
                        <option value="4">Postre</option>
                        <option value="5">Colación de la tarde</option>
                        <option value="6">Cena</option>
                        <option value="7">Otros</option>
                      </select>
                    </article>
                    <article class="col-md-6">
                      <label for="tiempoPreparacion" class="form-label">Tiempo de preparación</label>
                      <input type="text" name="tiempoPreparacion" id="tiempoPreparacion"  class="form-control" placeholder="40 minutos" required>
                    </article>
                    <article class="col-md-6">
                      <label for="tiempoCoccion" class="form-label">Tiempo de coccion</label>
                      <input type="text" class="form-control" name="tiempoCoccion" id="tiempoCoccion" placeholder="1 hora" required>
                    </article>
                    <article class="col-md-6">
                      <label for="caducidad" class="form-label">Caducidad</label>
                      <input type="text" class="form-control" name="caducidad" id="caducidad"  placeholder="5 días en refrigeración" required>
                    </article>
                    <article class="col-md-6">
                      <label for="porciones" class="form-label">Porciones</label>
                      <input type="text" class="form-control" name="porciones" id="porciones" placeholder="6" required>
                    </article>
                    <article class="col-md-6">
                      <label for="costoPromedio" class="form-label">Costo Promedio</label>
                      <input type="text" class="form-control" name="costoPromedio" id="costoPromedio" placeholder="$48 pesos" required>
                    </article>
                    <article class="col-md-6">
                      <label for="rendimiento" class="form-label">Rendimiento</label>
                      <input type="text" class="form-control" name="rendimiento" id="rendimiento" placeholder="2" required>
                    </article>
                    <article class="col-md-6">
                      <label for="descripcion" class="form-label">Descripcion del Platillo</label>
                      <textarea name="descripcion" id="descripcion" class="form-control" placeholder="Este, es uno de los platillos que preparas en un abrir y cerrar los ojos si tienes invitados o alguna reunión. Haz de sobra porque vuelan sin que te des cuenta! :)" required></textarea>
                    </article>
                    <article class="col-md-6">
                      <label for="imagenPlatillo" class="form-label">Subir imagen del Platillo</label>
                      <input type="file" class="form-control" name="imagenPlatillo" id="imagenPlatillo"  accept="image/*" required>  
                    </article>
                    <article class="col-md-6">
                     <label for="autor" class="form-label">Autor</label>
                      <input type="text" name="autor" id="autor" class="form-control" placeholder="Ej. Jesús Robles Sánchez" required>
                    </article>
                    <input type="hidden" name="idAdministrador" id="idAdministrador" value="<?php echo $_SESSION['idAdministrador']?>">
                    <input type="hidden" name="idUsuario" id="idUsuario" value="0">
                    <input type="hidden" name="idAlumno" id="idAlumno" value="0">
                  </form>
                  <br>
                  <article class="p-2" style="background-image: linear-gradient(to top, #e6e9f0 0%, #eef1f5 100%); border-radius:5px;">
                    <center>
                     <button class="btn btn-info text-white" onclick="validarFormulario('formDatosP', 'nav-datos')">Guardar</button>
                    </center>
                  </article>                 
                </section>
              </section>
              <section class="tab-pane fade" id="nav-ingredientes" role="tabpanel" aria-labelledby="nav-ingredientes-tab" tabindex="0">
                <!-- Sección 2: Ingredientes -->
                <section id="section2" class="mt-1">
                  <header class="p-1" style="background-color: #00b1ce; color:white; border-radius:5px;">
                    <h4>Sección 2: Ingredientes</h4>
                  </header>
                  <!-- Campos del formulario de Ingredientes -->
                  <form id="formIgredientes" class="container mt-3">
                    <hr>
                    <section id="grupoFormularioContainer">
                      <section class="grupo-formulario row">
                        <article class="col-md-3 p-1">
                          <input type="text" name="nombreIngrediente" id="nombreIngrediente" class="form-control" placeholder="Nombre" required>
                        </article>
                        <article class="col-md-3 p-1">
                          <input type="text" name="cantidad" id="cantidad" class="form-control" placeholder="Cantidad" required>
                        </article>
                        <article class="col-md-3 p-1">
                          <input type="text" name="unidadMedida" class="form-control" placeholder="Unidad de Medida" required>
                          </article>
                        <article class="col-md-3 p-1">
                          <button class="btn btn-danger remove-btn" type="button">Eliminar</button>
                        </article>
                      </section>
                    </section>
                    <section class="p-1">
                      <button class="btn btn-primary" id="btnAgregar" type="button">Agregar más</button>
                    </section>
                  </form>
                  <br>
                  <article class="p-2" style="background-image: linear-gradient(to top, #e6e9f0 0%, #eef1f5 100%); border-radius:5px;">
                    <center>
                     <button class="btn btn-info text-white" onclick="validarFormulario('formIgredientes', 'nav-ingredientes')">Guardar</button>
                    </center>
                  </article>
                </section>
              </section>
              <section class="tab-pane fade" id="nav-utencilios" role="tabpanel" aria-labelledby="nav-utencilios-tab" tabindex="0">
                <!-- Sección 3: Utencilios -->
                <section id="section3" class="mt-1">
                  <header class="p-1" style="background-color: #00b1ce; color:white; border-radius:5px;">
                    <h4>Sección 3: Utencilios</h4>
                  </header>
                  <!-- Campos del formulario de Utencilios -->
                  <form id="formUtencilio" class="container mt-3">
                    <hr>
                    <section id="formularioUtenciliosContainer">
                      <section class="formulario-utencilios row">
                        <article class="col-md-4 p-1">
                          <input type="text" name="nombreUtencilio" id="nombreUtencilio" class="form-control" placeholder="Nombre del utencilio" required>
                        </article>
                        <article class="col-md-4 p-1">
                          <input type="number" name="cantidad" id="cantidad" min="1" class="form-control" placeholder="Cantidad de utencilios" required>
                        </article>
                        <article class="col-md-4 p-1">
                          <button class="btn btn-danger remove-btn-utencilios" type="button">Eliminar</button>
                        </article>
                      </section>
                    </section>
                    <section class="p-1">
                      <button class="btn btn-primary" id="btnAgregarUtencilios" type="button">Agregar más</button>
                    </section>
                  </form>
                  <br>
                  <article class="p-2" style="background-image: linear-gradient(to top, #e6e9f0 0%, #eef1f5 100%); border-radius:5px;">
                    <center>
                     <button class="btn btn-info text-white" onclick="validarFormulario('formUtencilio', 'nav-utencilios')">Guardar</button>
                    </center>
                  </article>
                </section>
              </section>
              <section class="tab-pane fade" id="nav-preparacion" role="tabpanel" aria-labelledby="nav-preparacion-tab" tabindex="0">
                <!-- Sección 4: Preparacion -->
                <section id="section4" class="mt-1">
                  <header class="p-1" style="background-color: #00b1ce; color:white; border-radius:5px;">
                    <h4>Sección 4: Preparación</h4>
                  </header>
                  <!-- Campos del formulario de Preparación -->
                  <form id="formPreparacion" class="container mt-3 " method="POST"  enctype="multipart/form-data">
                    <hr>
                    <section id="formularioPreparacionContainer">
                      <section class="formulario-preparacion row"  >
                        <article class="col-md-3 p-1">
                          <label for="paso">Número de paso</label>
                          <input type="number" name="paso" id="paso" min="1" class="form-control" required>
                        </article>
                        <article class="col-md-3 p-1">
                          <label for="instruccion">Instrucción</label>
                          <textarea class="form-control" name="instruccion" id="instruccion"required></textarea>
                        </article>
                        <article class="col-md-3 p-1">
                          <label for="imagen">Foto del paso</label>
                          <input type="file" name="fotoPreparacion" id="fotoPreparacion" class="form-control" accept="image/*">
                        </article>
                        <article class="col-md-3 p-4">
                          <button class="btn btn-danger remove-btn-preparacion" type="button">Eliminar</button>
                        </article>
                      </section>
                    </section>
                    <section class="p-1">
                      <button class="btn btn-primary" id="btnAgregarPreparacion" type="button">Agregar más</button>
                    </section>
                  </form>
                  <br>
                  <article class="p-2" style="background-image: linear-gradient(to top, #e6e9f0 0%, #eef1f5 100%); border-radius:5px;">
                    <center>
                     <button class="btn btn-info text-white" onclick="validarFormulario('formPreparacion', 'nav-preparacion')">Guardar</button>
                    </center>
                  </article>
                </section>
              </section>
              <section class="tab-pane fade" id="nav-nutriente" role="tabpanel" aria-labelledby="nav-nutriente-tab" tabindex="0">
                <!-- Sección 5: Información Nutrimental -->
                <section id="section5" class="mt-1">
                  <header class="p-1" style="background-color: #00b1ce; color:white; border-radius:5px;">
                    <h4>Sección 5: Información Nutrimental</h4>
                  </header>
                  <!-- Campos del Información Nutrimental -->
                  <form id="formNutriente" class="container mt-3">
                    <hr>
                    <section id="formularioNutrimentalContainer">
                      <section class="formulario-nutrimental row">
                        <article class="col-md-2 p-1">
                          <input type="text" class="form-control" name="nombreNutriente" id="nombreNutriente" placeholder="Nombre" required>
                        </article>
                        <article class="col-md-3 p-1">
                          <input type="number" step="0.01" class="form-control" name="cantidadR" id="cantidadR" placeholder="Cantidad por receta" required>
                        </article>
                        <article class="col-md-3 p-1">
                          <input type="number" step="0.01" class="form-control" name="cantidadP" id="cantidadP" placeholder="Cantidad por porción" required>
                        </article>
                        <article class="col-md-2 p-1">
                          <input type="text" class="form-control" name="unidadMedida" id="unidadMedida" placeholder="Unidad de Medida" required>
                        </article>
                        <article class="col-md-2 p-1">
                          <button class="btn btn-danger remove-btn-nutrimental" type="button">Eliminar</button>
                        </article>
                      </section>
                    </section>
                    <section class="p-1">
                      <button class="btn btn-primary" id="btnAgregarNutrimental" type="button">Agregar más</button>
                    </section>
                  </form>
                  <br>
                  <article class="p-2" style="background-image: linear-gradient(to top, #e6e9f0 0%, #eef1f5 100%); border-radius:5px;">
                    <center>
                     <button class="btn btn-info text-white" onclick="validarFormulario('formNutriente', 'nav-nutriente')">Guardar</button>
                    </center>
                  </article>
                </section>  
              </section>
              <section class="tab-pane fade" id="nav-complemento" role="tabpanel" aria-labelledby="nav-complemento-tab" tabindex="0">
                <!-- Sección 6: Informacion adicional -->
                <section id="section6" class="mt-1">
                  <header class="p-1" style="background-color: #00b1ce; color:white; border-radius:5px;">
                    <h4>Sección 6: Información Adicional</h4>
                  </header>
                  <form id="formComplemento" class="container row">
                    <article class="col-md-6">
                      <label for="codigo" class="form-label text-dark"><i class="bi bi-geo-fill" style="color: #F77C44;"></i>&nbsp;Estado a la que pertenece el platillo</label>
                      <select  class="form-select" id="estado" name="estado" required>
                        <option value="" selected="selected">-- Seleccione --</option>
                        <option value="Aguascalientes">Aguascalientes</option>
                        <option value="Baja California">Baja California</option>
                        <option value="Baja California Sur">Baja California Sur</option>
                        <option value="Campeche">Campeche</option>
                        <option value="Coahuila de Zaragoza">Coahuila de Zaragoza </option>
                        <option value="Colima">Colima</option>
                        <option value="Chiapas">Chiapas</option>
                        <option value="Chihuahua">Chihuahua</option>
                        <option value="Ciudad de México">Ciudad de México</option>
                        <option value="Durango">Durango</option>
                        <option value="Guanajuato">Guanajuato</option>
                        <option value="Guerrero">Guerrero</option>
                        <option value="Hidalgo">Hidalgo</option>
                        <option value="Jalisco">Jalisco</option>
                        <option value="México">México</option>
                        <option value="Michoacán de Ocampo">Michoacán de Ocampo</option>
                        <option value="Morelos">Morelos</option>
                        <option value="Nayarit">Nayarit</option>
                        <option value="Nuevo León">Nuevo León</option>
                        <option value="Oaxaca">Oaxaca</option>
                        <option value="Puebla">Puebla</option>
                        <option value="Querétaro">Querétaro</option>
                        <option value="Quintana Roo">Quintana Roo</option>
                        <option value="San Luis Potosí">San Luis Potosí</option>
                        <option value="Sinaloa">Sinaloa</option>
                        <option value="Sonora">Sonora</option>
                        <option value="Tabasco">Tabasco</option>
                        <option value="Tamaulipas">Tamaulipas</option>
                        <option value="Tlaxcala">Tlaxcala</option>
                        <option value="Veracruz">Veracruz</option>
                        <option value="Yucatán">Yucatán</option>
                        <option value="Zacatecas">Zacatecas</option>
                      </select>
                    </article>
                    <article class="col-md-6">
                      <label for="region" class="form-label">Región del platillo</label>
                      <input type="text" name="region" id="region" class="form-control" required>
                    </article>
                    <article class="col-md-6">
                      <label for="municipio" class="form-label">Municipio del platillo</label>
                      <input type="text" name="municipio" id="municipio" class="form-control" required>
                    </article>
                    <article class="col-md-6">
                      <label for="lengua" class="form-label">Lengua que hablan</label>
                      <input type="text" name="lengua" id="lengua" class="form-control" required>
                    </article>
                    <article class="col-md-6">
                      <label for="cultura" class="form-label">Cultura que pertenecen</label>
                      <input type="text" name="cultura" id="cultura" class="form-control" required>
                    </article>
                  </form>
                  <br>
                  <article class="p-2" style="background-image: linear-gradient(to top, #e6e9f0 0%, #eef1f5 100%); border-radius:5px;">
                    <center>
                     <button class="btn btn-info text-white" onclick="validarFormulario('formComplemento', 'nav-complemento')">Guardar</button>
                    </center>
                  </article>
                </section>
              </section>
              <section class="tab-pane fade" id="nav-finalizar" role="tabpanel" aria-labelledby="nav-finalizar-tab" tabindex="0">
                <center>
                  <article class="col-sm-6">
                    <img src="vista/images/cuenta/2.jpg" class="img-fluid" >
                    <button type="button" class="btn btn-primary" onclick="registrarTodo()">Finalizar y guardar todo</button>
                  </article>
                </center>
                <br>
              </section>
            </main>          
          </section>
        </section>
                <section class="tab-pane fade" id="registrar-alumnos">
                    <article style="background-color: #061533; color:aliceblue; padding: 0.5%;">
                        <h3>Registrar de Alumno</h3>
                    </article><br>
                    <section class="container-fluid font-weight-bold"  style="color: #072b39; background-color:#f9f9f9; border-right:#00dbff 8px  solid; border-radius: 5px;">
                        <section class="container p-3" >
                            <form class="row g-3 needs-validation" action="admin" method="post" >
                                <article class="col-md-6">
                                    <label for="nombre" class="form-label"><i class="bi bi-person-fill"></i> &nbsp;Nombre</label>
                                    <input type="text" class="form-control" id="nombre" name="nombre" placeholder="Marcos" required>     
                                </article>
                                <article class="col-md-6">
                                    <label for="apellidos" class="form-label"><i class="bi bi-people-fill"></i> &nbsp;Apellidos</label>
                                    <input type="text" class="form-control" id="apellidos" name="apellidos" placeholder="Jimnéz Flores" required>
                                </article>
                                <article class="col-md-6">
                                    <label for="sexo" class="form-label"><i class="bi bi-person-check-fill"></i> &nbsp;Sexo</label>
                                    <select  class="form-select" id="sexo" name="sexo" required>
                                        <option value="" selected="selected">Seleccione...</option>
                                        <option value="Hombre">Hombre</option>
                                        <option value="Mujer">Mujer</option>
                                    </select>
                                </article>
                                <article class="col-md-6">
                                    <label for="semestre" class="form-label"><i class="fas fa-graduation-cap"></i>&nbsp;Semestre</label>
                                    <select class="form-select" name="semestre" id="semestre"  required>
                                        <option value="" selected="selected" >Seleccione...</option>
                                        <option value="Primero">Primero</option>
                                        <option value="Segundo">Segundo</option>
                                        <option value="Tercero">Tercero</option>
                                        <option value="Cuarto">Cuarto</option>
                                        <option value="Quinto">Quinto</option>
                                        <option value="Sexto">Sexto</option>
                                        <option value="Séptimo">Séptimo</option>
                                        <option value="Octavo">Octavo</option>
                                        <option value="Noveno">Noveno</option>
                                        <option value="Décimo">Décimo</option>
                                    </select>
                                </article>
                                <article class="col-md-6">
                                    <label for="carrera" class="form-label"><i class="fas fa-graduation-cap"></i>&nbsp;Carrera</label>
                                    <select class="form-select" name="carrera" id="carrera"  required>
                                        <option value="" selected="selected" >Seleccione...</option>
                                        <option value="Licenciatura en Nutrición">Licenciatura en Nutrición</option>
                                        <option value="Ingeniería en Alimentos">Ingeniería en Alimentos</option>
                                        <option value="Ingeniería en Agroindustrias">Ingeniería en Agroindustrias</option>
                                    </select>
                                </article>
                                <article class="col-md-6">
                                    <label for="edad" class="form-label"><i class="fa-solid fa-calendar-check"></i>&nbsp;Edad</label>
                                    <input type="text" class="form-control" name="edad" id="edad" required>
                                </article>
                                <article class="col-md-6">
                                    <label for="usuario" class="form-label"><i class="bi bi-person-circle"></i>&nbsp;Usuario</label> 
                                    <input type="text" class="form-control" name="usuario" id="usuario-alumn" onBlur="comprobarAlumno()" required>
                                    <span id="resultadoAl"></span>
                                </article>
                                <article class="col-md-6">
                                    <label for="contrasena" class="form-label"><i class="fa-solid fa-key"></i>&nbsp;Cotraseña</label> 
                                    <input type="password" class="form-control" name="contrasena" id="contrasena"  required>
                                </article>
                                 <input type="hidden" name="nivelUsuario" value="2">
                                <article class="col-12 p-5">
                                    <center>
                                        <button  type="submit"    name="registrarse" value="registrarse" class="btn btn-primary">Registrar</button>
                                    </center>
                                </article>
                            </form>
                        </section>
                    </section>
                </section>
                <section class="tab-pane fade" id="registrar-usuarios">
                    <article style="background-color: #061533; color:aliceblue; padding: 0.5%;">
                        <h3>Registrar Usuario</h3>
                    </article><br>
                    <section class="container-fluid font-weight-bold p-3"  style="color: #072b39; background-color:#f9f9f9; border-right:#00dbff 8px  solid; border-radius: 5px;">
                        <section class="container">
                            <form class="row g-3 needs-validation" action="admin" method="post" >
                                <article class="col-md-6">
                                    <label for="nombre" class="form-label"><i class="bi bi-person-fill"></i> &nbsp;Nombre</label>
                                    <input type="text" class="form-control" id="nombre" name="nombre" placeholder="Marcos" required> 
                                </article>
                                <article class="col-md-6">
                                    <label for="apellidos" class="form-label"><i class="bi bi-people-fill"></i> &nbsp;Apellidos</label>
                                    <input type="text" class="form-control" id="apellidos" name="apellidos" placeholder="Jimnéz Flores" required>
                                </article>
                                <article class="col-md-6">
                                    <label for="sexo" class="form-label"><i class="bi bi-person-check-fill"></i> &nbsp;Sexo</label>
                                    <select  class="form-select" id="sexo" name="sexo" required>
                                        <option value="" selected="selected">Seleccione...</option>
                                        <option value="Hombre">Hombre</option>
                                        <option value="Mujer">Mujer</option>
                                    </select>
                                </article>
                                <article class="col-md-6">
                                    <label for="escolaridad" class="form-label"><i class="fas fa-graduation-cap"></i>&nbsp;Escolaridad</label>
                                    <select class="form-select" name="escolaridad" id="escolaridad"  required>
                                        <option value="" selected="selected" >Seleccione...</option>
                                        <option value="Ninguna">Ninguna</option>
                                        <option value="Preescolar">Preescolar</option>
                                        <option value="Primaria">Primaria</option>
                                        <option value="Secundaria">Secundaria</option>
                                        <option value="Bachillerato">Bachillerato</option>
                                        <option value="Licenciatura">Licenciatura</option>
                                        <option value="Posgrado">Posgrado</option>
                                    </select>
                                </article>
                                <article class="col-md-6">
                                    <label for="ocupacion" class="form-label"><i class="fa-solid fa-briefcase"></i>&nbsp;Ocupacion</label>
                                    <input type="text" class="form-control" name="ocupacion" id="Ocupacion" required>
                                </article>
                                <article class="col-md-6">
                                    <label for="edad" class="form-label"><i class="fa-solid fa-calendar-check"></i>&nbsp;Edad</label>
                                    <input type="text" class="form-control" name="edad" id="edad" required>
                                </article>
                                <article class="col-md-6">
                                    <label for="domicilio" class="form-label"><i class="bi bi-house-fill"></i>&nbsp;Domicilio</label>
                                    <input type="text" class="form-control" name="domicilio" id="domicilio" required>
                                </article>
                                <article class="col-md-6">
                                    <label for="usuario" class="form-label"><i class="bi bi-person-circle"></i>&nbsp;Usuario</label> 
                                    <input name="usuario" type="text" id="usuario-general" class="form-control" onBlur="comprobarUsuario()" required>
                                    <span id="resultadoUs"></span>
                                </article>
                                <article class="col-md-6">
                                    <label for="contrasena" class="form-label"><i class="fa-solid fa-key"></i>&nbsp;Cotraseña</label> 
                                    <input type="password" class="form-control" name="contrasena" id="contrasena"  required>
                                </article>
                                <input type="hidden" name="nivelUsuario" value="3">
                                <article class="col-12 p-3">
                                    <center>
                                      <button  type="submit"    name="registrarusuario" value="registrarusuario" class="btn btn-primary">Registrar</button>
                                    </center>
                                </article>
                            </form>
                        </section>
                    </section>
                </section>
                <section class="tab-pane fade" id="encuesta">
                    <article style="background-color: #061533; color:aliceblue; padding: 0.5%;">
                        <h3>Resultados de los usuarios que nos visitan</h3>
                    </article><br>
                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                      <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="graficas" data-bs-toggle="tab" data-bs-target="#graficas-pane" type="button" role="tab" aria-controls="graficas-pane" aria-selected="true"><strong>Gráficas</strong></button>
                      </li>
                      <li class="nav-item" role="presentation">
                        <button class="nav-link" id="registro-encuesta" data-bs-toggle="tab" data-bs-target="#registro-encuesta-pane" type="button" role="tab" aria-controls="registro-encuesta-pane" aria-selected="false"><strong>Registros</strong></button>
                      </li>
                    </ul>
                    <section class="tab-content" id="myTabContent">
                        <section class="tab-pane fade show active" id="graficas-pane" role="tabpanel" aria-labelledby="graficas" tabindex="0">
                            <center>
                                <section class="row p-2">
                                    <section class="col-md-3 ">
                                      <h6>Género que nos visitan en porcentaje</h6>
                                      <canvas id="grafico" width="100" height="100"></canvas>
                                    </section>
                                    <section class="col-md-3">
                                        <h6>Medios por donde nos conocieron en porcentaje</h6>
                                        <canvas id="graficoMedios" width="100" height="100"></canvas>
                                    </section>
                                    <section class="col-md-3">
                                        <h6>Estados de visitantes en porcentaje</h6>
                                        <canvas id="graficoEstado" width="100" height="100"></canvas>
                                    </section>
                                    <section class="col-md-3">
                                        <h6>Calificación promedio de la plataforma </h6>
                                        <canvas id="graficoCalificacion" width="100" height="100"></canvas>
                                    </section>
                                </section>
                            </center>
                        </section>
                        <section class="tab-pane fade" id="registro-encuesta-pane" role="tabpanel" aria-labelledby="registro-encuesta" tabindex="0">
                            <section class="table-responsive" id="consultaEncuesta">
                                <table class="table table-hover table-sm">
                                    <thead class="table-dark">
                                        <tr>
                                            <th scope="col">Número</th>
                                            <th scope="col">Nombre</th>
                                            <th scope="col">Sexo</th>
                                            <th scope="col">Medio</th>
                                            <th scope="col">Estado</th>
                                            <th scope="col">Municipio</th>
                                            <th scope="col">Comentario</th>
                                            <th scope="col">Calificación</th>
                                        </tr>
                                    </thead>
                                    <tbody id="resultadoEncuesta">
                                        <?php
                                            $contador = 1; // Inicializar el contador a 1
                                            foreach($listaEncuesta as $encuesta) { 
                                                printf('<tr>');
                                                      
                                                    printf('<td>%d</td>', $contador); // Mostrar el número secuencial en lugar del id 
                                                    printf('<td>%s</td>', $encuesta->getNombre());
                                                    printf('<td>%s</td>', $encuesta->getSexo());
                                                    printf('<td>%s</td>', $encuesta->getMedio());
                                                    printf('<td>%s</td>', $encuesta->getEstado());
                                                    printf('<td>%s</td>', $encuesta->getMunicipio());
                                                    printf('<td>%s</td>', $encuesta->getComentario());
                                                    printf('<td>%s</td>', $encuesta->getCalificacion());
                                                printf('</tr>');
                                                 $contador++; // Incrementar el contador en cada iteración
                                            } 
                                        ?>
                                    </tbody>
                                </table>
                            </section>
                        </section>
                    </section>                     
                </section>
            </section>
        </main>
    </section>
</section>
<!-- Formulario para mandar el id para editar platillo de administrador-->
<form name="editarPlatilloAdministrador" method="post" action="">
    <input type="hidden" name="idPlatilloEditar" value="-1">
    <input type="hidden" name="nombre" value="<?php echo $_SESSION['usuario'];?>">
</form>

<!--Formulario para mandar el id paravalidar el platillo del alumno-->
<form name="validarPlatilloAlumno" method="post" action="">
    <input type="hidden" name="idPlatilloValidar" value="-1">
    <input type="hidden" name="nombre" value="<?php echo $_SESSION['usuario'];?>">
</form>

<!--Formulario para mandar el id para validar el platillo del usuario-->
<form name="validarPlatilloUsuario" method="post" action="">
    <input type="hidden" name="idPlatilloValidarU" value="-1">
    <input type="hidden" name="nombre" value="<?php echo $_SESSION['usuario'];?>">
</form>

<!--Cerrar session -->                   
<form name="salirForm" method="post" action="">
    <input type="hidden" name="salirAction" id="salirAction" value="-1">
</form>

<script>
    //----------------------------Modificar usuario-----------------------------------------
    $('.editbtn').on('click', function(){
        let userId = $(this).data('userid'); // Obtener el ID del usuario del atributo data-userid
        $('#idUpdate').val(userId);
        
        let $tr = $(this).closest('tr');
        let datos = $tr.children("td").map(function(){
            return $(this).text();
        }).get();

        $("#nombre").val(datos[1]);
        $("#apellidos").val(datos[2]);
        $("#sexo").val(datos[3]);
        $("#escolaridad").val(datos[4]);
        $("#ocupacion").val(datos[5]);
        $("#domicilio").val(datos[6]);
        $("#edad").val(datos[7]);
        $("#usuario1").val(datos[8]);
        $("#contrasena").val(datos[9]);
    });


    //----------------------------Buscar usuario-----------------------------------------
    function buscar(valor) {
        let request = new XMLHttpRequest();
        request.onreadystatechange = function() {
            if (request.readyState == 4) {
                if (request.status == 200) {
                    document.getElementById("resultado").innerHTML = request.responseText;
                }
            }
        }
        request.open('GET', 'controlador/buscar-usuario.php?busqueda='+valor, true);
        request.send();
    }

    //--------------------------Eliminar usuario ------------------------------------------
    function eliminarUsuario(id) {
        Swal.fire({
            title: '¿Esta seguro de eliminar el Usuario?',
            text: "¡No podrás revertir esto!",
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            cancelButtonText:'Cancelar',
            confirmButtonText: 'Si, Eliminar!'
        }).then((result) => {
            if (result.value) {
               document.forms['eliminarForm'].elements['idUsuario'].value = id;
               document.forms['eliminarForm'].submit();
           }
       });
    }

    //----------------------------Modificar Alumno----------------------------------------- -->                  
    $('.editAlumno').on('click', function(){
        let alumnoId = $(this).data('alumnoid'); // Obtener el ID del alumno del atributo data-alumnoid
        $('#idAlum').val(alumnoId);
        
        let $tr = $(this).closest('tr');
        let datos = $tr.children("td").map(function(){
            return $(this).text();
        }).get();

        $("#nombre-alumno").val(datos[1]);
        $("#apellidos-alumno").val(datos[2]);
        $("#sexo-alumno").val(datos[3]);
        $("#semestre-alumno").val(datos[4]);
        $("#carrera-alumno").val(datos[5]);
        $("#edad-alumno").val(datos[6]);
        $("#usuario-alumno").val(datos[7]);
        $("#contrasena-alumno").val(datos[8]);
    });



    //----------------------------Eliminar Alumno----------------------------------------- -->
    function eliminarAlumno(id) {
        Swal.fire({
            title: '¿Esta seguro de eliminar el Alumno?',
            text: "¡No podrás revertir esto!",
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            cancelButtonText:'Cancelar',
            confirmButtonText: 'Si, Eliminar!'
        }).then((result) => {
            if (result.value) {
               document.forms['eliminarAlum'].elements['idAlumno'].value = id;
               document.forms['eliminarAlum'].submit();
           }
       });
    }

    // Moficar el platillo
    function editarPlatilloAdministrador(id){
        document.forms['editarPlatilloAdministrador'].elements['idPlatilloEditar'].value = id;
        document.forms['editarPlatilloAdministrador'].submit();
    }

    //Validar platillo que el usuario publico
    function validarPlatilloAlumno(id){
        document.forms['validarPlatilloAlumno'].elements['idPlatilloValidar'].value=id;
        document.forms['validarPlatilloAlumno'].submit();
    } 

    //Validar platillo que el usuario publico
    function validarPlatilloUsuario(id){
        document.forms['validarPlatilloUsuario'].elements['idPlatilloValidarU'].value=id;
        document.forms['validarPlatilloUsuario'].submit();
    } 



    //--------------------------Eliminar platillo-----------------------------------------------
    function eliminarPlatillo(id) {
        Swal.fire({
            title: '¿Esta seguro de eliminar el Platillo',
            text: "¡No podrás revertir esto!",
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            cancelButtonText:'Cancelar',
            confirmButtonText: 'Si, Eliminar!'
        }).then((result) => {
            if (result.value) {
               document.forms['eliminarPlato'].elements['idPlatillo'].value = id;
               document.forms['eliminarPlato'].submit();
           }
       });
    }

    function comentarioPlatillo(id){
        document.forms['comentarioForm'].elements['idComentario'].value = id;
        document.forms['comentarioForm'].submit();
    }

    //------- Funcion para mandar el parametro del id de platillo selecionado y mostrar modal
    function verModal(id) {
        jQuery.ajax({
          url: "ajax/estadoValidacion.php", 
          data: { id: id }, // se pasa el 'id' como parametro al servidor
          type: "POST",
          success: function (data) {
              // Suponiendo que 'data' contiene el contenido modal obtenido del servidor
              $("#resultadoEstado").html(data);
              $("#verEstado").modal("show"); // se muestra el modal
          },
          error: function () {
            //se muestra el error en la consola, si es que hay
            console.error("Error fetching modal content.");
          },
        });
    }

    //------- Funcion para mandar el parametro del id de platillo selecionado y mostrar modal
    function verModalUsuario(id) {
         jQuery.ajax({
          url: "ajax/estadoValidacionUsuario.php", 
          data: { id: id }, // se pasa el 'id' como parametro al servidor
          type: "POST",
          success: function (data) {
              // Suponiendo que 'data' contiene el contenido modal obtenido del servidor
              $("#resultadoEstadoUsuario").html(data);
              $("#verEstadoUsuario").modal("show"); // se muestra el modal
          },
          error: function () {
            //se muestra el error en la consola, si es que hay
            console.error("Error fetching modal content.");
          },
        });
    }

    /* Busqueda de usuarios */
    $(document).ready(function(){
        $("#busquedaUsuario").keyup(function(){
          let consulta = $(this).val();

          if (consulta != "") {
            $.ajax({
              url:"ajax/buscar-usuario.php",
              method:"POST",
              data:{consulta:consulta},
              success:function(data){
                $("#consultaUsuarios").hide();
                $("#resultadoBuscarUsuario").html(data);
                $("#resultadoBuscarUsuario").css("display","block");
               
              }
            });
          }else{
            $("#resultadoBuscarUsuario").css("display","none");
            $("#consultaUsuarios").show();
          }

        });
    });


    /* Busqueda de alumnos */
    $(document).ready(function(){
        $("#busquedaAlumno").keyup(function(){
          let consulta = $(this).val();
          if (consulta != "") {
            $.ajax({
              url:"ajax/buscar-alumno.php",
              method:"POST",
              data:{consulta:consulta},
              success:function(data){
                $("#consultaAlumnos").hide();
                $("#resultadoBuscarAlumno").html(data);
                $("#resultadoBuscarAlumno").css("display","block");
               
              }
            });
          }else{
            $("#resultadoBuscarAlumno").css("display","none");
            $("#consultaAlumnos").show();
          }

        });
    });

    /* Busqueda de platillos de alumnos */
    $(document).ready(function(){
        $("#busquedaPlatillo").keyup(function(){
          let consulta = $(this).val();
          if (consulta != "") {
            $.ajax({
              url:"ajax/buscar-platillo.php",
              method:"POST",
              data:{consulta:consulta},
              success:function(data){
                $("#consultaPlatillos").hide();
                $("#resultadoBuscarPlatillo").html(data);
                $("#resultadoBuscarPlatillo").css("display","block");
               
              }
            });
          }else{
            $("#resultadoBuscarPlatillo").css("display","none");
            $("#consultaPlatillos").show();
          }

        });
    });

    /* Busqueda de platillos de usuarios */
    $(document).ready(function(){
        $("#busquedaPlatilloUsuario").keyup(function(){
          let consulta = $(this).val();
          if (consulta != "") {
            $.ajax({
              url:"ajax/buscar-platilloU.php",
              method:"POST",
              data:{consulta:consulta},
              success:function(data){
                $("#consultaPlatillosUsuarios").hide();
                $("#resultadoBuscarPlatilloUsuario").html(data);
                $("#resultadoBuscarPlatilloUsuario").css("display","block");
               
              }
            });
          }else{
            $("#resultadoBuscarPlatilloUsuario").css("display","none");
            $("#consultaPlatillosUsuarios").show();
          }

        });
    });

    /* Busqueda de platillos del administrador */
    $(document).ready(function(){
        $("#busquedaPlatilloAdmin").keyup(function(){
          let consulta = $(this).val();
          if (consulta != "") {
            $.ajax({
              url:"ajax/buscar-platilloAdmin.php",
              method:"POST",
              data:{consulta:consulta},
              success:function(data){
                $("#consultaPlatillosAdmin").hide();
                $("#resultadoBuscarPlatilloAdmin").html(data);
                $("#resultadoBuscarPlatilloAdmin").css("display","block");
               
              }
            });
          }else{
            $("#resultadoBuscarPlatilloAdmin").css("display","none");
            $("#consultaPlatillosAdmin").show();
          }

        });
    });


    /*Funcion para agregar o eliminar formulario de Ingredientes */
    $(document).ready(function() {
        // Agregar nuevo grupo de formulario al hacer clic en el botón "Agregar más"
        $('#btnAgregar').click(function() {
          let grupoFormulario = '<section class="grupo-formulario row">' +
          '<article class="col-md-3 p-1">' +
          '<input type="text" name="nombreIngrediente" id="nombreIngrediente" class="form-control" placeholder="Nombre" required>' +
          '</article>' +
          '<article class="col-md-3 p-1">' +
          '<input type="text" name="cantidad" id="cantidad" class="form-control" placeholder="Cantidad" required>' +
          '</article>' +
          '<article class="col-md-3 p-1">' +
          '<input type="text" name="unidadMedida" class="form-control" placeholder="Unidad de Medida" required>' +
          '</article>' +
          '<article class="col-md-3 p-1">' +
          '<button class="btn btn-danger remove-btn" type="button">Eliminar</button>' +
          '</article>' +
          '</section>';
          $('#grupoFormularioContainer').append(grupoFormulario);
        });

        // Eliminar grupo de formulario al hacer clic en el botón "Eliminar"
        $(document).on('click', '.remove-btn', function() {
          $(this).closest('.grupo-formulario').remove();
        });
    });

    /*Funcion para agregar o eliminar formulario de Preparacion */
    $(document).ready(function() {
        // Agregar nuevo grupo de formulario al hacer clic en el botón "Agregar más"
        $('#btnAgregarPreparacion').click(function() {
          let formularioPreparacion = '<section class="formulario-preparacion row">' +
          '<article class="col-md-3 p-1">' +
          '<label for="paso">Número de paso</label>'+
          '<input type="number" name="paso" id="paso" min="1" class="form-control" required>' +
          '</article>' +
          '<article class="col-md-3 p-1">' +
          '<label for="instruccion">Instrucción</label>'+
          '<textarea class="form-control" name="instruccion" id="instruccion" required></textarea>' +
          '</article>' +
          '<article class="col-md-3 p-1">' +
          '<label for="imagen">Foto del paso</label>'+
          '<input type="file" name="fotoPreparacion" id="fotoPreparacion" class="form-control" accept="image/*">' +
          '</article>' +
          '<article class="col-md-3 p-4">' +
          '<button class="btn btn-danger remove-btn-preparacion" type="button">Eliminar</button>' +
          '</article>' +
          '</section>';
          $('#formularioPreparacionContainer').append(formularioPreparacion);
        });
        // Eliminar grupo de formulario al hacer clic en el botón "Eliminar"
        $(document).on('click', '.remove-btn-preparacion', function() {
          $(this).closest('.formulario-preparacion').remove();
        });
    });

    /*Funcion para agregar o eliminar formulario de Utencilios */
    $(document).ready(function() {
        // Agregar nuevo grupo de formulario al hacer clic en el botón "Agregar más"
        $('#btnAgregarUtencilios').click(function() {
          let formularioUtencilios = '<section class="formulario-utencilios row">' +
          '<article class="col-md-4 p-1">' +
          '<input type="text" name="nombreUtencilio" id="nombreUtencilio" class="form-control" placeholder="Nombre del utencilio" required>' +
          '</article>' +
          '<article class="col-md-4 p-1">' +
          '<input type="number" name="cantidad" id="cantidad" min="1" class="form-control" placeholder="Cantidad de utencilios" required>' +
          '</article>' +
          '<article class="col-md-4 p-1">' +
          '<button class="btn btn-danger remove-btn-Utencilios" type="button">Eliminar</button>' +
          '</article>' +
          '</section>';
          $('#formularioUtenciliosContainer').append(formularioUtencilios);
        });
        // Eliminar grupo de formulario al hacer clic en el botón "Eliminar"
        $(document).on('click', '.remove-btn-Utencilios', function() {
          $(this).closest('.formulario-utencilios').remove();
        });
    });

    /*Funcion para agregar o eliminar formulario de informacion nutrimental */
    $(document).ready(function() {
        // Agregar nuevo grupo de formulario al hacer clic en el botón "Agregar más"
        $('#btnAgregarNutrimental').click(function() {
          let formularioNutrimental = '<section class="formulario-nutrimental row">' +
          '<article class="col-md-2 p-1">' +
          '<input type="text" class="form-control" name="nombreNutriente" id="nombreNutriente" placeholder="Nombre" required>' +
          '</article>' +
          '<article class="col-md-3 p-1">' +
          '<input type="number" step="0.01" class="form-control" name="cantidadR" id="cantidadR" placeholder="Cantidad por receta" required>' +
          '</article>' +
          '<article class="col-md-3 p-1">' +
          '<input type="number" step="0.01" class="form-control" name="cantidadP" id="cantidadP" placeholder="Cantidad por porción" required>' +
          '</article>' +
          '<article class="col-md-2 p-1">'+
          '<input type="text" class="form-control" name="unidadMedida" id="unidadMedida" placeholder="Unidad de Medida" required>'+
          '</article>'+
          '<article class="col-md-2 p-1">' +
          '<button class="btn btn-danger remove-btn-nutrimental" type="button">Eliminar</button>' +
          '</article>' +
          '</section>';
          $('#formularioNutrimentalContainer').append(formularioNutrimental);
        });
        // Eliminar grupo de formulario al hacer clic en el botón "Eliminar"
        $(document).on('click', '.remove-btn-nutrimental', function() {
          $(this).closest('.formulario-nutrimental').remove();
        });
    });

    /*Funcion para eliminar un platillo */
    $(document).on('click', '.eliminar-platillo', function() {
        const platilloId = $(this).data('platillo-id'); // Obtener el ID del platillo desde el atributo data
        const row = $(this).closest('tr'); // Obtener la fila correspondiente al botón de eliminación

        console.log(platilloId);
        Swal.fire({
            title: '¿Estás seguro?',
            text: 'Esta acción eliminará el platillo',
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Sí, eliminar',
            cancelButtonText: 'Cancelar'
        }).then((result) => {
            if (result.isConfirmed) {
                $.ajax({
                    url: 'ajax/eliminarPlatillo.php', // Ruta al archivo PHP que manejará la eliminación del platillo
                    method: 'POST',
                    data: { idPlatillo: platilloId },
                    success: function(response) {
                        // Eliminar la fila de la tabla en el cliente
                        row.remove();

                        Swal.fire({
                            icon: 'success',
                            title: '¡Eliminado!',
                            text: 'El platillo se eliminó correctamente.',
                            showConfirmButton: false,
                            timer: 1500
                        });
                    },
                    error: function(error) {
                        console.error('Error al eliminar el platillo: ', error);
                    }
                });
            }
        });
    });


    function salir(){
        document.forms['salirForm'].elements['salirAction'].value = 1;
        document.forms['salirForm'].submit();
    }
</script>

<script>
    const labels = <?php echo json_encode($labels); ?>;
    const data = {
        labels: labels,
        datasets: [{
            label: 'Vistas',
            backgroundColor: 'rgb(255, 170, 0)',
            borderColor: 'rgb(255, 195, 0)',
            pointStyle: 'circle',
            pointRadius: 5,
            pointHoverRadius: 10,
            data: <?php echo json_encode($data); ?>
        }]
    };

    const config = {
        type: 'line',
        data: data,
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'top',
                },
                title: {
                    display: true,
                    text: 'Tabla de visitas por mes'
                }
            }
        }
    };

    const myChart = new Chart(
      document.getElementById('grafica-visitas'),
      config
    );

    const ctxPie = document.getElementById('grafico').getContext('2d');

    const dataPie = {
      labels: <?php echo json_encode($labelsG); ?>, // Reemplazar con tus datos de género (por ejemplo: ['Hombres', 'Mujeres'])
      datasets: [{
        data: <?php echo json_encode($dataG); ?>, // Reemplazar con la cantidad de cada género (por ejemplo: [50, 30])
        backgroundColor: ['#1AB7FF', '#F832E0'] // Colores de fondo para las secciones (puedes añadir más colores si es necesario)
      }]
    };

    const configPie = {
      type: 'pie',
      data: dataPie,
    };

    const myChartPie = new Chart(ctxPie, configPie);

    const ctxPieM = document.getElementById('graficoMedios').getContext('2d');
    const dataPieM = {
      labels: <?php echo json_encode($labelsM); ?>, // Reemplazar con tus datos de categorías de medios
      datasets: [{
        data: <?php echo json_encode($dataM); ?>, // Reemplazar con la cantidad de cada categoría de medios
        backgroundColor: ['#1AB7FF', '#F832E0', '#FFD700', '#32CD32', '#FF4500', '#8A2BE2', '#FF69B4'] // Colores de fondo para las secciones (puedes añadir más colores si es necesario)
      }]
    };

    const configPieM = {
      type: 'pie',
      data: dataPieM,
    };

    const myChartPieM = new Chart(ctxPieM, configPieM);

    const ctxPieE = document.getElementById('graficoEstado').getContext('2d');
    const dataPieE = {
      labels: <?php echo json_encode($labelsE); ?>, // Reemplazar con tus datos de categorías de medios
      datasets: [{
        data: <?php echo json_encode($dataE); ?>, // Reemplazar con la cantidad de cada categoría de medios
        backgroundColor: ['#1AB7FF', '#F832E0', '#FFD700', '#32CD32', '#FF4500', '#8A2BE2', '#FF69B4'] // Colores de fondo para las secciones (puedes añadir más colores si es necesario)
      }]
    };

    const configPieE = {
      type: 'pie',
      data: dataPieE,
    };

    const myChartPieE = new Chart(ctxPieE, configPieE);

    const ctxPieC = document.getElementById('graficoCalificacion').getContext('2d');
    const dataPieC = {
      labels: <?php echo json_encode($labelsC); ?>, // Reemplazar con tus datos de categorías de medios
      datasets: [{
        data: <?php echo json_encode($dataC); ?>, // Reemplazar con la cantidad de cada categoría de medios
        backgroundColor: ['#1AB7FF', '#F832E0', '#FFD700', '#32CD32', '#FF4500', '#8A2BE2', '#FF69B4'] // Colores de fondo para las secciones (puedes añadir más colores si es necesario)
      }]
    };

    const configPieC = {
      type: 'pie',
      data: dataPieC,
    };

    const myChartPieC = new Chart(ctxPieC, configPieC);


</script>
