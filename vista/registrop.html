<main class="contenedor">
  <section class="container-fluid">
    <section class="row">
      <article id="barra" class="barra-lateral col-sm-auto">
        <nav class="nav nav-pills menu d-flex d-sm-block justify-content-center flex-wrap"  aria-orientation="vertical" style="cursor: pointer;">
          <a class="nav-link active" data-bs-toggle="pill" data-bs-target="#perfil" aria-selected="true"><i class="fas fa-image-portrait"></i><span>Perfil</span></a>
          <a class="nav-link" data-bs-toggle="pill" data-bs-target="#registro-platillo1" aria-selected="false"><i class="fas fa-plate-wheat"></i><span>Publicar platillo</span></a>
          <a class="nav-link" data-bs-toggle="pill" data-bs-target="#editarplatillo" aria-selected="false"><i class="fas fa-mug-hot"></i><span>Consulta de Platillos</span></a>
          <a class="nav-link" data-bs-toggle="pill" data-bs-target="#eliminar-cuenta" aria-selected="false"><i class="fa-solid fa-user-xmark"></i><span>Eliminar cuenta</span></a>
          <a class="nav-link" href="Javascript:salir()" aria-selected="false"><i class="fas fa-sign-out-alt m-1"></i>&nbsp;Cerrar sesión</a>
        </nav>
      </article>
      <main class="main col">
        <section class="tab-content row justify-content-center align-content-center text-center" id="v-pills-tabContent">
          <section  class="tab-pane fade show active" id="perfil">
            <article style="background-color: #0C2233; color:aliceblue; padding: 0.5%;">
                <h3>Mi perfil</h3>
            </article><br>
            <section class="p-4" style="background-color:#F0EABE ; color: white; text-align: justify;">
              <article class="p-1" style="background-color:#11BFAE; color:white; text-align:center;"><h5>Datos personales</h5></article>
              <section class="row my-3">
                <article class="col-sm-6">
                  <img src="vista/images/cuenta/1.png" class="img-fluid" >
                </article>
                <article class="col-sm-6 mt-4 ">
                  <h6 style="color: #22636D;"><strong>Nombre:</strong>&nbsp;<?php echo $_SESSION['nombre']?></h6>
                  <h6 style="color: #22636D;"><strong>Apellidos:</strong>&nbsp;<?php echo $_SESSION['apellidos']?></h6>
                  <h6 style="color: #22636D;"><strong>Sexo:</strong>&nbsp;<?php echo $_SESSION['sexo']?></h6>
                  <h6 style="color: #22636D;"><strong>Escolaridad:</strong>&nbsp;<?php echo $_SESSION['escolaridad']?></h6>
                  <h6 style="color: #22636D;"><strong>Ocupación:</strong>&nbsp;<?php echo $_SESSION['ocupacion']?></h6>
                  <h6 style="color: #22636D;"><strong>Domicilio:</strong>&nbsp;<?php echo $_SESSION['domicilio']?></h6>
                  <h6 style="color: #22636D;"><strong>Edad:</strong>&nbsp;<?php echo $_SESSION['edad']?></h6>
                  <h6 style="color: #22636D;"><strong>Usuario:</strong>&nbsp;<?php echo $_SESSION['nusuario']?></h6>
                </article>
              </section>
              <article class="p-3" style="background-color: #EACDCD;">
                <button class="btn btn-primary end-0"  data-bs-toggle="modal" data-bs-target="#actilizarDatos">Actualizar datos</button>
              </article>
            </section>
              <!-- Modal de registro -->
            <section class="modal fade" id="actilizarDatos" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
              <section class="modal-dialog">
                <article class="modal-content">
                  <article class="modal-header" style="background-image: linear-gradient(-225deg, #a0052c 0%, #8d0830 48%, #8d0830 100%); color: white;">
                    <h5 class="modal-title justify-content-center w-100 text-center" id="staticBackdropLabel"><strong>Actualizar Datos de Perfil</strong></h5>
                    <button type="button" class="btn-close  btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                  </article>
                  <article class="modal-body">
                    <form class="row g-3 needs-validation" action="" method="post" >
                      <input type="hidden" name="idU" id="idU" value="<?php echo $_SESSION['idUsuario']?>">
                      <article class="col-md-6">
                        <label for="nombre" class="form-label"><i class="bi bi-person-fill"></i> &nbsp;Nombre</label>
                        <input type="text" class="form-control" id="nombre" name="nombre" value="<?php echo $_SESSION['nombre']?>" required> 
                      </article>
                      <article class="col-md-6">
                        <label for="apellidos" class="form-label"><i class="bi bi-people-fill"></i> &nbsp;Apellidos</label>
                        <input type="text" class="form-control" id="apellidos" name="apellidos" value="<?php echo $_SESSION['apellidos']?>" required> 
                      </article>
                      <article class="col-md-6">
                        <label for="sexo" class="form-label"><i class="bi bi-person-check-fill"></i> &nbsp;Sexo</label>
                        <select  class="form-select" id="sexo" name="sexo" required>
                          <option value="<?php echo $_SESSION['sexo']?>"><?php echo $_SESSION['sexo']?></option>
                          <option value="Hombre">Hombre</option>
                          <option value="Mujer">Mujer</option>
                        </select>
                      </article>
                      <article class="col-md-6">
                        <label for="escolaridad" class="form-label"><i class="fas fa-graduation-cap"></i>&nbsp;Escolaridad</label>
                        <select class="form-select" name="escolaridad" id="escolaridad"  required>
                          <option value="<?php echo $_SESSION['escolaridad']?>"><?php echo $_SESSION['escolaridad']?></option>
                          <option value="Ninguna">Ninguna</option>
                          <option value="Preescolar">Preescolar</option>
                          <option value="Primaria">Primaria</option>
                          <option value="Secundaria">Secundaria</option>
                          <option value="Bachillerato">Bachillerato</option>
                          <option value="Licenciatura">Licenciatura</option>
                          <option value="Posgrado">Posgrado</option>
                        </select>
                      </article>
                      <article class="col-md-6">
                        <label for="ocupacion" class="form-label"><i class="fas fa-graduation-cap"></i>&nbsp;Ocupación</label>
                        <input type="text" class="form-control" name="ocupacion" id="ocupacion" value="<?php echo $_SESSION['ocupacion']?>" required>
                      </article>
                      <article class="col-md-6">
                        <label for="domicilio" class="form-label"><i class="bi bi-house-fill"></i>&nbsp;Domicilio</label>
                        <input type="text" class="form-control" name="domicilio" id="domicilio" required value="<?php echo $_SESSION['domicilio']?>">
                      </article>
                      <article class="col-md-6">
                        <label for="edad" class="form-label"><i class="fa-solid fa-calendar-check"></i>&nbsp;Edad</label>
                        <input type="text" class="form-control" name="edad" id="edad" value="<?php echo $_SESSION['edad']?>" required>
                      </article>
                      <article class="col-md-6">
                        <label for="usuario" class="form-label"><i class="bi bi-person-circle"></i>&nbsp;Usuario</label> 
                        <input type="text" class="form-control" name="usuario" id="usuario" value="<?php echo $_SESSION['nusuario']?>" onBlur="comprobarUsuario()" required>
                        <span id="resultado"></span>
                      </article>
                      <article class="col-md-6">
                        <label for="contrasena" class="form-label"><i class="fa-solid fa-key"></i>&nbsp;Cotraseña</label> 
                        <input type="password" class="form-control" name="contrasena" id="contrasena" value="<?php echo $_SESSION['ncontrasena']?>" required>
                      </article>
                      <input type="hidden" name="nivelUsuario" value="3">
                      <br>
                      <article class="modal-footer col-md-12" style="background-image: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);">
                        <center>
                          <button  type="submit" name="actualizarDatos" value="actualizarDatos" class="btn btn-primary">Guardar Cambios</button>
                        </center>
                      </article>
                    </form>
                  </article>
                </article>
              </section>    
            </section>
          </section>
          <section class="tab-pane fade " id="registro-platillo1">
            <article style="background-color: #0C2233; color:aliceblue; padding: 0.5%;">
              <article class="row">
                <article class="col-md-8">
                  <h3>Registrar Platillo</h3>
                </article>
                <article class="col-md-4">
                  <h4><i class="bi bi-info-circle-fill " data-bs-toggle="modal" data-bs-target="#modalInstrucciones" style="cursor:pointer;">&nbsp;Instrucciones</i> </h4>
                </article>
              </article>
            </article>
            <!-- Modal de instrucciones para el registro del platillo -->
            <section class="modal fade" id="modalInstrucciones" tabindex="-1" aria-hidden="true">
              <section class="modal-dialog">
                <section class="modal-content">
                  <header class="modal-header text-white" style="background-color: #087c9f;">
                    <h5 class="w-100 text-center fw-bold" id="exampleModalLabel">Instrucciones</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                  </header>
                   <article class="modal-body">
                    <div class="container">
                      <div class="card shadow">
                        <div class="card-body">
                          <h5 class="card-title  text-white p-2 rounded" style="background-color: #900C3F;">Instrucciones de Registro</h5>
                          <ul class="list-group list-group-flush text-start">
                            <li class="list-group-item">
                              <strong>1. Registro de Datos:</strong> Completa los formularios de cada sección.
                            </li>
                            <li class="list-group-item">
                              <strong>2. Guardar:</strong> Al completar un formulario, haz clic en el botón <strong class="text-info">Guardar</strong>.
                            </li>
                            <li class="list-group-item">
                              <strong>3. Validación:</strong> Si hay errores de validación, verifica que todos los campos estén completos.
                            </li>
                            <li class="list-group-item">
                              <strong>4. Éxito:</strong> Si los datos se guardaron correctamente, verás un mensaje de <strong class="text-success">Datos guardados correctamente</strong>.
                            </li>
                            <li class="list-group-item">
                              <strong>5. Repite:</strong> Repite el proceso para todas las secciones.
                            </li>
                            <li class="list-group-item">
                              <strong>6. Finalizar:</strong> Después de completar todas las secciones, haz clic en la pestaña <strong class="text-info">Finalizar</strong>.
                            </li>
                            <li class="list-group-item">
                              <strong>7. Confirmar:</strong> Luego, haz clic en el botón <strong class="text-primary">Finalizar y guardar todo</strong>. Espera y confirma el mensaje de <strong class="text-success">Registro completado</strong>, luego haz clic en <strong>Aceptar</strong>.
                            </li>
                            <li class="list-group-item">
                              <strong>8. Campos Incompletos:</strong> Si faltan campos por completar, verás un mensaje indicando que debes llenar todos los formularios.
                            </li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </article>
                  <article class="modal-footer" style="background-color: #fafaff;">
                    <button type="button" class="btn  btn-info text-white" data-bs-dismiss="modal">Cerrar</button>
                  </article>
                </section>
              </section>
            </section>
            <section class="container-fluid font-weight-bold p-3"  style="color: #072b39; background-color:#f9f9f9; border-right:#00dbff 8px  solid; border-radius: 5px;">
              <nav>
                <section class="nav nav-tabs" id="nav-tab" role="tablist">
                  <button class="nav-link active" id="nav-datos-tab" data-bs-toggle="tab" data-bs-target="#nav-datos" type="button" role="tab" aria-controls="nav-datos" aria-selected="true">Datos del platillo</button>
                  <button class="nav-link" id="nav-ingredientes-tab" data-bs-toggle="tab" data-bs-target="#nav-ingredientes" type="button" role="tab" aria-controls="nav-ingredientes" aria-selected="false">Ingredientes</button>
                  <button class="nav-link" id="nav-utencilios-tab" data-bs-toggle="tab" data-bs-target="#nav-utencilios" type="button" role="tab" aria-controls="nav-utencilios" aria-selected="false">Utencilios</button>
                  <button class="nav-link" id="nav-preparacion-tab" data-bs-toggle="tab" data-bs-target="#nav-preparacion" type="button" role="tab" aria-controls="nav-preparacion" aria-selected="false">Preparación</button>
                  <button class="nav-link" id="nav-complemento-tab" data-bs-toggle="tab" data-bs-target="#nav-complemento" type="button" role="tab" aria-controls="nav-complemento" aria-selected="false">Información adicional</button>
                  <button class="nav-link" id="nav-finalizar-tab" data-bs-toggle="tab" data-bs-target="#nav-finalizar" type="button" role="tab" aria-controls="nav-finalizar" aria-selected="false">Finalizar</button>
                </section>
              </nav>
              <main class="tab-content" id="nav-tabContent">
                <section class="tab-pane fade show active" id="nav-datos" role="tabpanel" aria-labelledby="nav-datos-tab" tabindex="0">
                  <!-- Sección 1: Datos del -->
                  <section id="section1" class="mt-1">
                    <header class="p-1" style="background-color: #00b1ce; color:white; border-radius:5px;">
                      <h4>Sección 1: Datos del platillo</h4>
                    </header>
                    <form id="formDatosP" class="row g-3 needs-validation"  method="POST"  enctype="multipart/form-data">
                      <article class="col-md-6">
                        <label for="nombrePlatillo" class="form-label">Nombre</label>
                        <input type="text" class="form-control" name="nombrePlatillo" id="nombrePlatillo" placeholder="Gelatina de Durazno" required>
                      </article>
                      <article class="col-md-6">
                        <label for="tiempoComida" class="form-label">Tiempo de Comida</label>
                        <select class="form-select text-center" name="tiempoComida" id="tiempoComida" required>
                          <option value="">-- Seleccione --</option>
                          <option value="1">Desayuno</option>
                          <option value="2">Colación de la mañana</option>
                          <option value="3">Comida</option>
                          <option value="4">Postre</option>
                          <option value="5">Colación de la tarde</option>
                          <option value="6">Cena</option>
                          <option value="7">Otros</option>
                        </select>
                      </article>
                      <article class="col-md-6">
                        <label for="tiempoPreparacion" class="form-label">Tiempo de preparación</label>
                        <input type="text" name="tiempoPreparacion" id="tiempoPreparacion"  class="form-control" placeholder="40 minutos" required>
                      </article>
                      <article class="col-md-6">
                        <label for="tiempoCoccion" class="form-label">Tiempo de coccion</label>
                        <input type="text" class="form-control" name="tiempoCoccion" id="tiempoCoccion" placeholder="1 hora" required>
                      </article>
                      <article class="col-md-6">
                        <label for="caducidad" class="form-label">Caducidad</label>
                        <input type="text" class="form-control" name="caducidad" id="caducidad"  placeholder="5 días en refrigeración" required>
                      </article>
                      <article class="col-md-6">
                        <label for="porciones" class="form-label">Porciones</label>
                        <input type="text" class="form-control" name="porciones" id="porciones" placeholder="6" required>
                      </article>
                      <article class="col-md-6">
                        <label for="costoPromedio" class="form-label">Costo Promedio</label>
                        <input type="text" class="form-control" name="costoPromedio" id="costoPromedio" placeholder="$48 pesos" required>
                      </article>
                      <article class="col-md-6">
                        <label for="rendimiento" class="form-label">Rendimiento</label>
                        <input type="text" class="form-control" name="rendimiento" id="rendimiento" placeholder="2" required>
                      </article>
                      <article class="col-md-6">
                        <label for="descripcion" class="form-label">Descripcion del Platillo</label>
                        <textarea name="descripcion" id="descripcion" class="form-control" placeholder="Este, es uno de los platillos que preparas en un abrir y cerrar los ojos si tienes invitados o alguna reunión. Haz de sobra porque vuelan sin que te des cuenta! :)" required></textarea>
                      </article>
                      <article class="col-md-6">
                        <label for="imagenPlatillo" class="form-label">Subir imagen del Platillo</label>
                        <input type="file" class="form-control" name="imagenPlatillo" id="imagenPlatillo"  accept="image/*" required>
                      </article>
                      <input type="hidden" name="autor" id="autor" value="<?php echo $_SESSION['nombre'].' '.$_SESSION['apellidos']?>" required>
                      <input type="hidden" name="idAlumno" id="idAlumno" value="0">
                      <input type="hidden" name="idUsuario" id="idUsuario" value="<?php echo $_SESSION['idUsuario']?>">
                      <input type="hidden" name="idAdministrador" id="idAdministrador" value="0">
                    </form>
                    <br>
                    <article class="p-2" style="background-image: linear-gradient(to top, #e6e9f0 0%, #eef1f5 100%); border-radius:5px;">
                      <center>
                       <button class="btn btn-info text-white" onclick="validarFormulario('formDatosP', 'nav-datos')">Guardar</button>
                      </center>
                    </article>                 
                  </section>
                </section>
                <section class="tab-pane fade" id="nav-ingredientes" role="tabpanel" aria-labelledby="nav-ingredientes-tab" tabindex="0">
                  <!-- Sección 2: Ingredientes -->
                  <section id="section2" class="mt-1">
                    <header class="p-1" style="background-color: #00b1ce; color:white; border-radius:5px;">
                      <h4>Sección 2: Ingredientes</h4>
                    </header>
                    <!-- Campos del formulario de Ingredientes -->
                    <form id="formIgredientes" class="container mt-3">
                      <hr>
                      <section id="grupoFormularioContainer">
                        <section class="grupo-formulario row">
                          <article class="col-md-3 p-1">
                            <input type="text" name="nombreIngrediente" id="nombreIngrediente" class="form-control" placeholder="Nombre" required>
                          </article>
                          <article class="col-md-3 p-1">
                            <input type="text" name="cantidad" id="cantidad" class="form-control" placeholder="Cantidad" required>
                          </article>
                          <article class="col-md-3 p-1">
                            <input type="text" name="unidadMedida" class="form-control" placeholder="Unidad de Medida" required>
                            </article>
                          <article class="col-md-3 p-1">
                            <button class="btn btn-danger remove-btn" type="button">Eliminar</button>
                          </article>
                        </section>
                      </section>
                      <section class="p-1">
                        <button class="btn btn-primary" id="btnAgregar" type="button">Agregar más</button>
                      </section>
                    </form>
                    <br>
                    <article class="p-2" style="background-image: linear-gradient(to top, #e6e9f0 0%, #eef1f5 100%); border-radius:5px;">
                      <center>
                       <button class="btn btn-info text-white" onclick="validarFormulario('formIgredientes', 'nav-ingredientes')">Guardar</button>
                      </center>
                    </article>
                  </section>
                </section>
                <section class="tab-pane fade" id="nav-utencilios" role="tabpanel" aria-labelledby="nav-utencilios-tab" tabindex="0">
                  <!-- Sección 3: Utencilios -->
                  <section id="section3" class="mt-1">
                    <header class="p-1" style="background-color: #00b1ce; color:white; border-radius:5px;">
                      <h4>Sección 3: Utencilios</h4>
                    </header>
                    <!-- Campos del formulario de Utencilios -->
                    <form id="formUtencilio" class="container mt-3">
                      <hr>
                      <section id="formularioUtenciliosContainer">
                        <section class="formulario-utencilios row">
                          <article class="col-md-4 p-1">
                            <input type="text" name="nombreUtencilio" id="nombreUtencilio" class="form-control" placeholder="Nombre del utencilio" required>
                          </article>
                          <article class="col-md-4 p-1">
                            <input type="number" name="cantidad" id="cantidad" min="1" class="form-control" placeholder="Cantidad de utencilios" required>
                          </article>
                          <article class="col-md-4 p-1">
                            <button class="btn btn-danger remove-btn-utencilios" type="button">Eliminar</button>
                          </article>
                        </section>
                      </section>
                      <section class="p-1">
                        <button class="btn btn-primary" id="btnAgregarUtencilios" type="button">Agregar más</button>
                      </section>
                    </form>
                    <br>
                    <article class="p-2" style="background-image: linear-gradient(to top, #e6e9f0 0%, #eef1f5 100%); border-radius:5px;">
                      <center>
                       <button class="btn btn-info text-white" onclick="validarFormulario('formUtencilio', 'nav-utencilios')">Guardar</button>
                      </center>
                    </article>
                  </section>
                </section>
                <section class="tab-pane fade" id="nav-preparacion" role="tabpanel" aria-labelledby="nav-preparacion-tab" tabindex="0">
                  <!-- Sección 4: Preparacion -->
                  <section id="section4" class="mt-1">
                    <header class="p-1" style="background-color: #00b1ce; color:white; border-radius:5px;">
                      <h4>Sección 4: Preparación</h4>
                    </header>
                    <!-- Campos del formulario de Preparación -->
                    <form id="formPreparacion" class="container mt-3">
                      <hr>
                      <section id="formularioPreparacionContainer">
                        <section class="formulario-preparacion row"  method="POST"  enctype="multipart/form-data">
                          <article class="col-md-3 p-1">
                            <label for="paso">Número de paso</label>
                            <input type="number" name="paso" id="paso" min="1" class="form-control" required>
                          </article>
                          <article class="col-md-3 p-1">
                            <label for="instruccion">Instrucción</label>
                            <textarea class="form-control" name="instruccion" id="instruccion"required></textarea>
                          </article>
                          <article class="col-md-3 p-1">
                            <label for="imagen">Foto del paso</label>
                            <input type="file" name="fotoPreparacion" id="fotoPreparacion" class="form-control" accept="image/*">
                          </article>
                          <article class="col-md-3 p-4">
                            <button class="btn btn-danger remove-btn-preparacion" type="button">Eliminar</button>
                          </article>
                        </section>
                      </section>
                      <section class="p-1">
                        <button class="btn btn-primary" id="btnAgregarPreparacion" type="button">Agregar más</button>
                      </section>
                    </form>
                    <br>
                    <article class="p-2" style="background-image: linear-gradient(to top, #e6e9f0 0%, #eef1f5 100%); border-radius:5px;">
                      <center>
                       <button class="btn btn-info text-white" onclick="validarFormulario('formPreparacion', 'nav-preparacion')">Guardar</button>
                      </center>
                    </article>
                  </section>
                </section>
                <section class="tab-pane fade" id="nav-complemento" role="tabpanel" aria-labelledby="nav-complemento-tab" tabindex="0">
                  <!-- Sección 6: Informacion adicional -->
                  <section id="section6" class="mt-1">
                    <header class="p-1" style="background-color: #00b1ce; color:white; border-radius:5px;">
                      <h4>Sección 6: Información Adicional</h4>
                    </header>
                    <form id="formComplemento" class="container row">
                      <article class="col-md-6">
                        <label for="codigo" class="form-label text-dark"><i class="bi bi-geo-fill" style="color: #F77C44;"></i>&nbsp;Estado a la que pertenece el platillo</label>
                        <select  class="form-select" id="estado" name="estado" required>
                          <option value="" selected="selected">-- Seleccione --</option>
                          <option value="Aguascalientes">Aguascalientes</option>
                          <option value="Baja California">Baja California</option>
                          <option value="Baja California Sur">Baja California Sur</option>
                          <option value="Campeche">Campeche</option>
                          <option value="Coahuila de Zaragoza">Coahuila de Zaragoza </option>
                          <option value="Colima">Colima</option>
                          <option value="Chiapas">Chiapas</option>
                          <option value="Chihuahua">Chihuahua</option>
                          <option value="Ciudad de México">Ciudad de México</option>
                          <option value="Durango">Durango</option>
                          <option value="Guanajuato">Guanajuato</option>
                          <option value="Guerrero">Guerrero</option>
                          <option value="Hidalgo">Hidalgo</option>
                          <option value="Jalisco">Jalisco</option>
                          <option value="México">México</option>
                          <option value="Michoacán de Ocampo">Michoacán de Ocampo</option>
                          <option value="Morelos">Morelos</option>
                          <option value="Nayarit">Nayarit</option>
                          <option value="Nuevo León">Nuevo León</option>
                          <option value="Oaxaca">Oaxaca</option>
                          <option value="Puebla">Puebla</option>
                          <option value="Querétaro">Querétaro</option>
                          <option value="Quintana Roo">Quintana Roo</option>
                          <option value="San Luis Potosí">San Luis Potosí</option>
                          <option value="Sinaloa">Sinaloa</option>
                          <option value="Sonora">Sonora</option>
                          <option value="Tabasco">Tabasco</option>
                          <option value="Tamaulipas">Tamaulipas</option>
                          <option value="Tlaxcala">Tlaxcala</option>
                          <option value="Veracruz">Veracruz</option>
                          <option value="Yucatán">Yucatán</option>
                          <option value="Zacatecas">Zacatecas</option>
                        </select>
                      </article>
                      <article class="col-md-6">
                        <label for="region" class="form-label">Región del platillo</label>
                        <input type="text" name="region" id="region" class="form-control" required>
                      </article>
                      <article class="col-md-6">
                        <label for="municipio" class="form-label">Municipio del platillo</label>
                        <input type="text" name="municipio" id="municipio" class="form-control" required>
                      </article>
                      <article class="col-md-6">
                        <label for="lengua" class="form-label">Lengua que hablan</label>
                        <input type="text" name="lengua" id="lengua" class="form-control" required>
                      </article>
                      <article class="col-md-6">
                        <label for="cultura" class="form-label">Cultura que pertenecen</label>
                        <input type="text" name="cultura" id="cultura" class="form-control" required>
                      </article>
                    </form>
                    <br>
                    <article class="p-2" style="background-image: linear-gradient(to top, #e6e9f0 0%, #eef1f5 100%); border-radius:5px;">
                      <center>
                       <button class="btn btn-info text-white" onclick="validarFormulario('formComplemento', 'nav-complemento')">Guardar</button>
                      </center>
                    </article>
                  </section>
                </section>
                <section class="tab-pane fade" id="nav-finalizar" role="tabpanel" aria-labelledby="nav-finalizar-tab" tabindex="0">
                  <center>
                    <article class="col-sm-6">
                      <img src="vista/images/cuenta/2.jpg" class="img-fluid" >
                      <button type="button" class="btn btn-primary" onclick="registrarTodo()">Finalizar y guardar todo</button>
                    </article>
                  </center>
                  <br>
                </section>
              </main>          
            </section>
          </section>
          <section class="tab-pane fade" id="editarplatillo">
            <header style="background-color: #0C2233; color:aliceblue; padding: 0.5%;">
              <h3>Consulta de Platillos Publicados</h3>
            </header>
            <section class="row p-2">
              <article class="col-md-1">
                <h5><b>Buscar:</b></h5>
              </article>
              <article class="col-md-11">
                <input class="form-control" type="text" id="busquedaPlatillo" placeholder="Buscar..." autocomplete="off">
              </article>
            </section>
            <section class="table-responsive" id="resultadoBuscarPlatillo"></section>
            <section class="table-responsive" id="consultaPlatillos">
              <table class="table table-hover table-xl">
                <thead class="table text-white" style="background-color:#1e0121;">
                  <tr>
                      <th scope="col">Número</th>
                      <th scope="col">Nombre</th>
                      <th scope="col">Imagen</th>
                      <th scope="col">Estado de validación</th>
                      <th scope="col" colspan="2">Opciones</th>
                    </tr>
                </thead>
                <tbody>
                  <?php
                    $contador = 1; // Inicializar el contador a 1
                    foreach($listaPlatillos as $platillo) { 
                      printf('<tr>');
                        printf('<td>%d</td>', $contador); // Mostrar el número secuencial en lugar del id 
                        printf('<td>%s</td>', $platillo->getNombre());
                        printf('<td>'.'<img src ="data:image/png;base64,'.base64_encode($platillo->getImagen()).'" width="50px" height="50px"/>'.'</td>');                         
                        printf('
                            <td>
                                <a class="text-primary" href="#" onclick="verModal(%d)" data-bs-toggle="modal" data-bs-target="#verEstado" style="text-decoration: none;">
                                    <article class="container">
                                        <center>
                                            <p class="p-1 col-md-6 rounded text-white text-break small" style="background-color:#51CAE3;"><strong>Ver</strong>&nbsp;<i class="bi bi-eye-fill"></i></p>
                                        </center>
                                    </article>
                                </a>
                            </td>
                        ', $platillo->getId());
                        printf('<td><a class="btn btn-success text-white p-1 rounded d-inline-flex align-items-center"  href="Javascript:editarPlatillo(%d)" style="text-decoration:none;">Actualizar&nbsp;<i class="bi bi-arrow-repeat ml-1" ></i></a></td>', $platillo->getId());                                                 
                        printf('<td><a class="eliminar-platillo bg-danger text-white p-1 rounded d-inline-flex align-items-center" data-platillo-id="%d" href="#" style="text-decoration: none;">Eliminar&nbsp;<i class="bi bi-trash-fill ml-1"></i></a></td>', $platillo->getId());
                                   
                      printf('</tr>');
                      $contador++; // Incrementar el contador en cada iteración
                    } 
                  ?>
                </tbody>
              </table>
              <!-- Modal -->
              <section class="modal fade" id="verEstado" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <section class="modal-dialog modal-dialog-centered ">
                  <section class="modal-content">
                    <section class="modal-header" style="background-color: #09386A; color: white;">
                      <h1 class="modal-title fs-5 w-100 text-center" id="exampleModalLabel">Estados de validación del platillo</h1>
                      <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                    </section>
                    <section class="modal-body">
                      <section class="container">
                        <section id="resultadoEstado">
                        </section>
                      </section>
                    </section>
                    <section class="modal-footer">
                      <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
                    </section>
                  </section>
                </section>
              </section>
            </section>
          </section>
          <section class="tab-pane fade" id="eliminar-cuenta">
            <header style="background-color: #0C2233; color:aliceblue; padding: 0.5%;">
              <h3>Eliminar mi cuenta</h3>
            </header>
            <section>
              <article class="container mt-5">
                <article class="container justify-content-center p-2" style="background-color:#C70039;color: white;">
                  <i class="bi fa-2x bi-info-circle me-2"></i>
                  <p>¡Hola! Valoramos tu conexión con la riqueza de la comida tradicional.  Tu aportación a la plataforma nos ayuda a enriquecer esta experiencia culinaria. Si decides seguir adelante, recuerda que siempre puedes regresar para seguir disfrutando de los sabores y colores de la comida tradicional. ¡Hasta luego y te deseamos lo mejor!</p>
                </article>
                <article class="container mt-5">
                  <article class="row">
                    <form id="eliminarCuenta" class="col-md-5 btn" style="background-color: #AA0012; color:white;" onsubmit="return false;">
                      <input type="hidden" name="idUsuario" id="idUsuario" value="<?php echo $_SESSION['idUsuario']?>">
                      <button onclick="eliminarcuenta(); return false;" style="background-color: #AA0012; color:white; border:#AA0012; "><i class="bi bi-trash-fill"></i>&nbsp;Eliminar solo mi cuenta</button>
                    </form>
                    <section class="col-md-1"><br></section>
                    <form id="eliminarcuentaPublicaciones" class="col-md-6 btn" style="background-color: #AA0012; color:white;" onsubmit="return false;">
                      <input type="hidden" name="idUsuario" id="idUsuario" value="<?php echo $_SESSION['idUsuario']?>">
                      <button onclick="eliminarcuentaPublicaciones(); return false;" style="background-color: #AA0012; color:white; border:#AA0012; "><i class="bi bi-trash-fill"></i>&nbsp;Eliminar mi cuenta y mis publicaciones</button>
                    </form>
                  </article>
                </article>
              </article>
            </section>
          </section>
        </section>        
      </main>
    </section>
  </section>
</main>
<!-- Formulario para mandar el id para editar platillo-->
<form name="editarPlatillo" method="post" action="">
  <input type="hidden" name="idPlatilloEditar" value="-1">
</form>
<script>
  //------- Funcion para mandar el parametro del id de platillo selecionado y mostrar modal
  function verModal(id) {
    jQuery.ajax({
      url: "ajax/estadoValidacionUsuario.php", 
      data: { id: id }, // se pasa el 'id' como parametro al servidor
      type: "POST",
      success: function (data) {
          // Suponiendo que 'data' contiene el contenido modal obtenido del servidor
          $("#resultadoEstado").html(data);
          $("#verEstado").modal("show"); // se muestra el modal
      },
      error: function () {
        //se muestra el error en la consola, si es que hay
        console.error("Error fetching modal content.");
      },
    });
  }

  //------- Funcion para mandar el parametro del id del platillo a modificar                    
  function editarPlatillo(id){
    document.forms['editarPlatillo'].elements['idPlatilloEditar'].value = id;
    document.forms['editarPlatillo'].submit();
  }

  /*Funcion para agregar o eliminar formulario de Ingredientes */
  $(document).ready(function() {
    // Agregar nuevo grupo de formulario al hacer clic en el botón "Agregar más"
    $('#btnAgregar').click(function() {
      let grupoFormulario = '<section class="grupo-formulario row">' +
      '<article class="col-md-3 p-1">' +
      '<input type="text" name="nombreIngrediente" id="nombreIngrediente" class="form-control" placeholder="Nombre" required>' +
      '</article>' +
      '<article class="col-md-3 p-1">' +
      '<input type="text" name="cantidad" id="cantidad" class="form-control" placeholder="Cantidad" required>' +
      '</article>' +
      '<article class="col-md-3 p-1">' +
      '<input type="text" name="unidadMedida" class="form-control" placeholder="Unidad de Medida" required>' +
      '</article>' +
      '<article class="col-md-3 p-1">' +
      '<button class="btn btn-danger remove-btn" type="button">Eliminar</button>' +
      '</article>' +
      '</section>';
      $('#grupoFormularioContainer').append(grupoFormulario);
    });

    // Eliminar grupo de formulario al hacer clic en el botón "Eliminar"
    $(document).on('click', '.remove-btn', function() {
      $(this).closest('.grupo-formulario').remove();
    });
  });

  /*Funcion para agregar o eliminar formulario de Preparacion */
  $(document).ready(function() {
    // Agregar nuevo grupo de formulario al hacer clic en el botón "Agregar más"
    $('#btnAgregarPreparacion').click(function() {
      let formularioPreparacion = '<section class="formulario-preparacion row">' +
      '<article class="col-md-3 p-1">' +
      '<label for="paso">Número de paso</label>'+
      '<input type="number" name="paso" id="paso" min="1" class="form-control" required>' +
      '</article>' +
      '<article class="col-md-3 p-1">' +
      '<label for="instruccion">Instrucción</label>'+
      '<textarea class="form-control" name="instruccion" id="instruccion" required></textarea>' +
      '</article>' +
      '<article class="col-md-3 p-1">' +
      '<label for="imagen">Foto del paso</label>'+
      '<input type="file" name="fotoPreparacion" id="fotoPreparacion" class="form-control" accept="image/*">' +
      '</article>' +
      '<article class="col-md-3 p-4">' +
      '<button class="btn btn-danger remove-btn-preparacion" type="button">Eliminar</button>' +
      '</article>' +
      '</section>';
      $('#formularioPreparacionContainer').append(formularioPreparacion);
    });
    // Eliminar grupo de formulario al hacer clic en el botón "Eliminar"
    $(document).on('click', '.remove-btn-preparacion', function() {
      $(this).closest('.formulario-preparacion').remove();
    });
  });

  /*Funcion para agregar o eliminar formulario de Utencilios */
  $(document).ready(function() {
    // Agregar nuevo grupo de formulario al hacer clic en el botón "Agregar más"
    $('#btnAgregarUtencilios').click(function() {
      let formularioUtencilios = '<section class="formulario-utencilios row">' +
      '<article class="col-md-4 p-1">' +
      '<input type="text" name="nombreUtencilio" id="nombreUtencilio" class="form-control" placeholder="Nombre del utencilio" required>' +
      '</article>' +
      '<article class="col-md-4 p-1">' +
      '<input type="number" name="cantidad" id="cantidad" min="1" class="form-control" placeholder="Cantidad de utencilios" required>' +
      '</article>' +
      '<article class="col-md-4 p-1">' +
      '<button class="btn btn-danger remove-btn-Utencilios" type="button">Eliminar</button>' +
      '</article>' +
      '</section>';
      $('#formularioUtenciliosContainer').append(formularioUtencilios);
    });
    // Eliminar grupo de formulario al hacer clic en el botón "Eliminar"
    $(document).on('click', '.remove-btn-Utencilios', function() {
      $(this).closest('.formulario-utencilios').remove();
    });
  });

  /*Funcion para eliminar un platillo */
  $(document).on('click', '.eliminar-platillo', function() {
    const platilloId = $(this).data('platillo-id'); // Obtener el ID del platillo desde el atributo data
    const row = $(this).closest('tr'); // Obtener la fila correspondiente al botón de eliminación

    console.log(platilloId);
    Swal.fire({
        title: '¿Estás seguro?',
        text: 'Esta acción eliminará el platillo',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Sí, eliminar',
        cancelButtonText: 'Cancelar'
    }).then((result) => {
        if (result.isConfirmed) {
            $.ajax({
                url: 'ajax/eliminarPlatillo.php', // Ruta al archivo PHP que manejará la eliminación del platillo
                method: 'POST',
                data: { idPlatillo: platilloId },
                success: function(response) {
                    // Eliminar la fila de la tabla en el cliente
                    row.remove();

                    Swal.fire({
                        icon: 'success',
                        title: '¡Eliminado!',
                        text: 'El platillo se eliminó correctamente.',
                        showConfirmButton: false,
                        timer: 1500
                    });
                },
                error: function(error) {
                    console.error('Error al eliminar el platillo: ', error);
                }
            });
        }
    });
  });

</script>
