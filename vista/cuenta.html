<section class="container-fluid">
  <article class="row justify-content-center align-content-center">
    <article class="col-4 barra">
      <img src="vista/images/iconos/logo-admi.png" height="60px">
    </article>
    <article class="col-8 text-right barra">
      <ul class="navbar-nav mr-auto">
        <li>
          <span>
            <?php echo $_SESSION['nombre'];?>&nbsp;<?php echo $_SESSION['apellidos'];?>
          </span>
          <a href="#" class="px-3 text-light perfil dropdown-toggle" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fas fa-user-circle user"></i></a>
          <article class="dropdown-menu" aria-labelledby="navbar-dropdown">
            <a class="dropdown-item menuperfil cerrar" href="Javascript:salir()"><i class="fas fa-sign-out-alt m-1"></i>Salir
            </a>
          </article>
        </li>
      </ul>
    </article>
  </article>
</section>



<section class="container-fluid">
  <section class="row">
    <article id="barra" class="barra-lateral col-12 col-sm-auto">
      <nav class="nav nav-pills menu d-flex d-sm-block justify-content-center flex-wrap"  aria-orientation="vertical" style="cursor: pointer;">
        <a class="nav-link active" data-bs-toggle="pill" data-bs-target="#perfil" aria-selected="true"><i class="fas fa-image-portrait"></i><span>Perfil</span></a>
        <a class="nav-link" data-bs-toggle="pill" data-bs-target="#registro-platillo" aria-selected="false"><i class="fas fa-plate-wheat"></i><span>Registrar platillo</span></a>
        <!--<a class="nav-link" data-bs-toggle="pill" data-bs-target="#platillopublicado" aria-selected="false"><i class="fas fa-mug-hot"></i><span>Platillos Publicados</span></a>-->
        <a class="nav-link" data-bs-toggle="pill" data-bs-target="#editarplatillo" aria-selected="false"><i class="fas fa-mug-hot"></i><span>Consulta de Platillos</span></a>
        <a class="nav-link" data-bs-toggle="pill" data-bs-target="#registro-platillo1" aria-selected="false"><i class="fas fa-plate-wheat"></i><span>Registrar platillo</span></a>
      </nav>
    </article>


    <main class="main col">
      
      <section class="tab-content row justify-content-center align-content-center text-center" id="v-pills-tabContent">
          <section  class="tab-pane fade show active" id="perfil">
            <article style="background-color: #0C2233; color:aliceblue; padding: 0.5%;">
              <h3>Mi perfil</h3>
            </article><br>
            <section class=" p-4" style="background-color:#F0EABE ; color: white; text-align: justify;">
              <article class="p-1" style="background-color:#11BFAE; color:white; text-align:center;"><h5>Datos personales</h5></article>
              <article style="margin-top: 2em;">
                <h6 style="color: #22636D;">Nombre:&nbsp;<?php echo $_SESSION['nombre']?></h6>
                <h6 style="color: #22636D;">Apellidos:&nbsp;<?php echo $_SESSION['apellidos']?></h6>
                <h6 style="color: #22636D;">Sexo:&nbsp;<?php echo $_SESSION['sexo']?></h6>
                <h6 style="color: #22636D;">Semestre:&nbsp;<?php echo $_SESSION['semestre']?></h6>
                <h6 style="color: #22636D;">Carrera:&nbsp;<?php echo $_SESSION['carrera']?></h6>
                <h6 style="color: #22636D;">Edad:&nbsp;<?php echo $_SESSION['edad']?></h6>
                <h6 style="color: #22636D;">Usuario:&nbsp;<?php echo $_SESSION['usuario']?></h6>
              </article>
              <article class="modal-footer" style="background-color: #EACDCD; margin-top: 2em;">
                <center>
                  <button class="btn btn-primary"  data-bs-toggle="modal" data-bs-target="#actilizarDatos">Actualizar datos</button>
                </center>
              </article>
            </section>

            <!-- Modal de registro -->
            <section class="modal fade" id="actilizarDatos" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
              <section class="modal-dialog">
                <article class="modal-content">
                  <article class="modal-header">
                    <h5 class="modal-title justify-content-center" id="staticBackdropLabel">Actualizar Datos de Perfil</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </article>
                  <article class="modal-body">
                    <form class="row g-3 needs-validation" action="cuenta" method="post" >
                        <input type="hidden" name="idalum" id="idAlum" value="<?php echo $_SESSION['id']?>">
                        <article class="col-md-6">
                          <label for="nombre" class="form-label"><i class="bi bi-person-fill"></i> &nbsp;Nombre</label>
                          <input type="text" class="form-control" id="nombre" name="nombre" value="<?php echo $_SESSION['nombre']?>" required> 
                          
                        </article>
                        <article class="col-md-6">
                          <label for="apellidos" class="form-label"><i class="bi bi-people-fill"></i> &nbsp;Apellidos</label>
                          <input type="text" class="form-control" id="apellidos" name="apellidos" value="<?php echo $_SESSION['apellidos']?>" required> 
                          
                        </article>
                        <article class="col-md-6">
                          <label for="sexo" class="form-label"><i class="bi bi-person-check-fill"></i> &nbsp;Sexo</label>
                          <select  class="form-select" id="sexo" name="sexo" required>
                            <option value="<?php echo $_SESSION['sexo']?>"><?php echo $_SESSION['sexo']?></option>
                            <option value="Hombre">Hombre</option>
                            <option value="Mujer">Mujer</option>
                          </select>
                        </article>

                        <article class="col-md-6">
                          <label for="semestre" class="form-label"><i class="fas fa-graduation-cap"></i>&nbsp;Semestre</label>
                          <select class="form-select" name="semestre" id="semestre"  required>
                            <option value="<?php echo $_SESSION['semestre']?>"><?php echo $_SESSION['semestre']?></option>
                            <option value="Primero">Primero</option>
                            <option value="Segundo">Segundo</option>
                            <option value="Tercero">Tercero</option>
                            <option value="Cuarto">Cuarto</option>
                            <option value="Quinto">Quinto</option>
                            <option value="Sexto">Sexto</option>
                            <option value="Séptimo">Séptimo</option>
                            <option value="Octavo">Octavo</option>
                            <option value="Noveno">Noveno</option>
                            <option value="Décimo">Décimo</option>
                          </select>
                        </article>

                        <article class="col-md-6">
                          <label for="carrera" class="form-label"><i class="fas fa-graduation-cap"></i>&nbsp;Carrera</label>
                          <select class="form-select" name="carrera" id="carrera"  required>
                            <option value="<?php echo $_SESSION['carrera']?>"><?php echo $_SESSION['carrera']?></option>
                            <option value="Licenciatura en Nutrición">Licenciatura en Nutrición</option>
                            <option value="Ingeniería en Alimentos">Ingeniería en Alimentos</option>
                            <option value="Ingeniería en Agroindustrias">Ingeniería en Agroindustrias</option>

                          </select>
                        </article>

                        <article class="col-md-6">
                          <label for="edad" class="form-label"><i class="fa-solid fa-calendar-check"></i>&nbsp;Edad</label>
                          <input type="text" class="form-control" name="edad" id="edad" value="<?php echo $_SESSION['edad']?>" required>
                        </article>

                        <article class="col-md-6">
                          <label for="usuario" class="form-label"><i class="bi bi-person-circle"></i>&nbsp;Usuario</label> 
                          <input type="text" class="form-control" name="usuario" id="usuario" value="<?php echo $_SESSION['usuario']?>" onBlur="comprobarAlumno()" required>
                          <span id="resultado"></span>
                        </article>
                        <article class="col-md-6">
                          <label for="contrasena" class="form-label"><i class="fa-solid fa-key"></i>&nbsp;Cotraseña</label> 
                          <input type="password" class="form-control" name="contrasena" id="contrasena" value="<?php echo $_SESSION['contrasena']?>" required>
                        </article>

                        <input type="hidden" name="nivelUsuario" value="2">
                        <br>
                        <article class="modal-footer col-md-12">
                         <center>
                          <button  type="submit" name="actualizarDatos" value="actualizarDatos" class="btn btn-primary">Guardar Cambios</button>
                        </center>
                      </article>
                    </form>
                  </article>
                </article>
              </section>    
            </section>
          </section>
          <!--
          <article class="tab-pane fade " id="registro-platillo">
            <article style="background-color: #0C2233; color:aliceblue; padding: 0.5%;">
              <h3>Registrar Platillo</h3>
            </article>
            <section class="container-fluid font-weight-bold p-3"  style="color: #072b39; background-color:#f9f9f9; border-right:#00dbff 8px  solid; border-radius: 5px;">
                <form class="was-validated" action="cuenta" method="post" enctype="multipart/form-data">                        
                <section id="parte1">
                  <article>
                    <label for="nombre" class="form-label">Nombre del Platillo</label>
                    <input type="text" name="nombre" id="nombre" class="form-control" placeholder="Chips Saludable" required>
                    <label for="ingredientes" class="form-label">Ingredientes</label>
                    <textarea name="ingredientes" id="ingredientes" class="form-control" placeholder="3 papas lavaadas &#10;1 Cucharadita de paprika&#10;1 cucharadita de curri&#10;Sal de mesa&#10; 2 cucharadas de acite oliva" required></textarea>
                    <label for="ingredientes" class="form-label">Utencilios</label>
                    <textarea name="utencilios" id="utencilios" class="form-control" placeholder="Mandolina de cocina o cuchillo&#10;Tazón&#10;Cuchara&#10;Charola" required></textarea>
                    <label for="tiempo" class="form-label">Tiempo de preparación</label>
                    <input type="text" name="tiempopreparacion" id="tiempopreparacion" class="form-control" placeholder="40 minutos" required >
                  </article>
                  <article>
                    <button id="btnsiguiente" class=" btn btn-info m-3" onclick="btnSiguiente()">Siguiente</button>
                  </article>
                </section>
                <section id="parte2">
                  <article>
                    <label for="caducidad" class="form-label">Caducidad</label>
                    <input type="text" name="caducidad" id="caducidad" class="form-control" placeholder="5 dias" required>
                    <label for="porciones" class="form-label">Porciones</label>
                    <input type="text" name="porciones" id="porciones" class="form-control" placeholder="6" required>
                    <label for="energia" class="form-label">Energia</label>
                    <input type="text" name="energia" id="energia" class="form-control" placeholder="323" required>
                    <label for="costo" class="form-label">Costo promedio</label>
                    <input type="text" name="costopromedio" id="costopromedio" class="form-control" placeholder="$ 15 pesos" required >
                  </article>
                  <article>
                    <button class="btn btn-warning m-3" onclick="btnAnterior2()">Anterior</button>
                    <button class="btn btn-info m-3" onclick="btnSiguiente2()">Siguiente</button>
                  </article>
                </section>
                <section id="parte3">
                  <article>
                    <label for="rendimiento" class="form-label">Rendimiento</label>
                    <input type="text" name="rendimiento" id="rendimiento" class="form-control" placeholder="" required>
                    <label for="proteinas" class="form-label">Proteinas</label>
                    <input type="text" name="proteinas" id="proteinas" class="form-control" placeholder="" required>
                    <label for="grasas" class="form-label">Grasas</label>
                    <input type="text" name="grasas" id="grasas" class="form-control" placeholder="" required>
                    <label  for="hidratoscarbono" class="form-label"> Hidratos de carbono</label>
                    <input type="text" name="hidratoscarbono" id="hidratoscarbon" class="form-control" placeholder="" required>
                  </article>
                  <article>
                    <button class="btn btn-warning m-3" onclick="btnAnterior3()">Anterior</button>
                    <button class="btn btn-info m-3" onclick="btnSiguiente3()">Siguiente</button>
                  </article>
                </section>
                <section id="parte4">
                  <article>
                    <label for="preparacion" class="form-label">Preparación</label>
                    <textarea class="form-control" name="preparacion" id="preparacion" placeholder="1.- Rebana las papas con la mandolina o con un cuchillo muy filoso para que queden muy delgadas. &#10;2.- Mezcla el resto de los ingredientes y marina ahí las rodajas de papa, por 10 minutos, moviendo constantemente&#10;3.- Prepara una charola con papel encerado y acomoda las rodajas de papa en ella, un poco separadas entre sí.&#10;4.- Hornea a 180OC durante 20 minutos o hasta que doren." required></textarea>
                    <label for="tipocomida">Tipo de comida</label>
                    <select  class="form-select" id="tipocomida" name="tipocomida" required>
                      <option value="" selected="selected">Seleccione...</option>
                      <option value="Desayuno">Desayuno</option>
                      <option value="Comida">Comida</option>
                      <option value="Cena">Cena</option>
                    </select>
                    
                    <input type="hidden" name="autor" id="autor" class="form-control" value="<?php echo $_SESSION['nombre'];  echo ' '; echo $_SESSION['apellidos']; ?>">
                    <label for="imagen" class="form-label"> Subir imagen</label>
                    <input type="file" name="imagen" id="imagen" class="form-control" required>
                  </article>
                  <article>
                    <button class="btn btn-warning m-3" onclick="btnAnterior4()">Anterior</button>
                    <button type="submit"  name="registrarplatillo" value="registrarplatillo" class="btn btn-primary">Registrar Platillo</button>
                  </article>
                </section>                
              </form>
            </section>
          </article>
        -->
          <article class="tab-pane fade " id="registro-platillo1">
            <article style="background-color: #0C2233; color:aliceblue; padding: 0.5%;">
              <h3>Registrar Platillo</h3>
            </article>
               <div class="progress">
                <div class="progress-bar progress-bar-striped bg-success step" role="progressbar" style="width: 25%"></div>
              </div>
              <div class="progress">
  <div class="progress-bar" role="progressbar" style="width: 50%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">25%</div>
</div>
            <section class="container-fluid font-weight-bold p-3"  style="color: #072b39; background-color:#f9f9f9; border-right:#00dbff 8px  solid; border-radius: 5px;">
                <form class="was-validated" action="cuenta" method="post" enctype="multipart/form-data">                        
                <section id="parte1">
                  <article>
                    <center>
                      <article class="container">
                        <h4 class="text-start text-center fw-bold" style="color: #400b80;">Registro de la información del platillo</h4>
                      </article>
                      <br>
                    </center>
                    <section class="row">
                      <section class="col-md-6">
                        <label for="nombre" class="form-label">Nombre del Platillo</label>
                        <input type="text" name="nombre" id="nombre" class="form-control" placeholder="Chips Saludable" required>
                      </section>
                      <section class="col-md-6">
                        <label for="descripcion" class="form-label">Descripción o resumén del platillo</label>
                        <textarea name="descripcion" id="descripcion" class="form-control" required></textarea>
                      </section>
                    </section>
                    <br>
                    <section class="row">
                      <section class="col-md-6">
                        <label for="tiempoPreparacion" class="form-label">Tiempo de preparación</label>
                        <section class="row container text-primary">
                          &nbsp;Horas:&nbsp;
                          <input type="number" name="tiempoPreparacion" class="form-control col-md-4" min="0" required placeholder="0">&nbsp;Minutos:&nbsp;
                          <input type="number" name="tiempoPreparacion" class="form-control col-md-4" required placeholder="0"  min="0" max="59">
                        </section>
                      </section>
                      <section class="col-md-6">
                        <label for="tiempoPreparacion" class="form-label">Tiempo de cocción</label>
                        <section class="row container text-primary">
                          &nbsp;Horas:&nbsp;
                          <input type="number" name="tiempoPreparacion" class="form-control col-md-4" min="0"  required placeholder="0">&nbsp;Minutos:&nbsp;
                          <input type="number" name="tiempoPreparacion" class="form-control col-md-4" required placeholder="0"  min="0" max="59">
                        </section>
                      </section>
                    </section>
                    <br>
                    <section class="row">
                      <section class="col-md-6">
                        <label for="caducidad" class="form-label">Caducidad</label>
                        <input type="text" name="caducidad" id="caducidad" class="form-control" required>
                      </section>
                      <section class="col-md-6">
                        <label for="porciones" class="form-label">Porciones</label>
                        <input type="text" name="porciones" id="porciones" class="form-control" required>
                      </section>
                    </section>
                    <br>
                    <section class="row">
                      <section class="col-md-6">
                        <label for="costoPromedio" class="form-label">Costo promedio</label>
                        <input type="text" name="costo" class="form-control" required>
                      </section>
                      <section class="col-md-6">
                        <label for="rendimiento" class="form-label">Rendimiento</label>
                        <input type="text" name="rendimiento" class="form-control" required>
                      </section>
                    </section>
                    <br>
                    <section class="row">
                      <section class="col-md-6">
                        <label for="tipocomida">Tiempo de comida</label>
                        <select  class="form-select" id="tipocomida" name="tipocomida" required>
                          <option value="" selected="selected">Seleccione...</option>
                          <option value="Desayuno">Desayuno</option>
                          <option value="Comida">Comida</option>
                          <option value="Cena">Cena</option>
                          <option value="Colación de la mañana">Colación de la mañana</option>
                          <option value="Colación de la tarde">Colación de la tarde </option>
                          <option value="Otros">Otros</option>
                        </select>
                      </section>
                      <section class="col-md-6">
                        <label for="imagen" class="form-label"> Subir foto del platillo</label>
                        <input type="file" name="imagen" id="imagen" class="form-control" required>
                      </section>
                    </section>

                  </article>
                  <article>
                    <button id="btnsiguiente" class=" btn btn-info m-3" onclick="btnSiguiente()">Siguiente</button>
                  </article>
                </section>
                <section id="parte2">
                  <center>
                    <article class="container">
                      <h4 class="text-start text-center fw-bold" style="color: #400b80;">Registro de la información Nutrimental</h4>
                    </article>
                    <br>
                  </center>
                  <section class="row">
                    <section class="col-md col-md-12">
                        <form name="" method="">
                          <section class="row p-2 text-white" style="background-color:#32030F;">
                            <article class="col-md-1">&nbsp; Nro.</article>
                            <article class="col-md-4"> Nombre del valor nutrimental</article>
                            <article class="col-md-3">Medida</article>
                            <article class="col-md-4">Medida por </article>
                          </section>
                          <br>
                          <section id="valores-nutrimentales">
                            <?php require_once("controlador/input-dinamico.php"); ?>
                          </section>

                          <section class="btn-action float-clear">
                            <input class="btn btn-success" type="button" name="agregar_registros" value="Agregar Mas" onClick="AgregarMas();" />
                            <input class="btn btn-danger" type="button" name="borrar_registros" value="Borrar Campos" onClick="BorrarRegistro();" />
                            <span class="success"><?php if(isset($resultado)) { echo $resultado; }?></span>
                          </section>
                        </form>
                    </section>
                  </section>

                  
                  <article>
                    <button class="btn btn-warning m-3" onclick="btnAnterior2()">Anterior</button>
                    <button class="btn btn-info m-3" onclick="btnSiguient 1
                    e2()">Siguiente</button>
                  </article>
                </section>
                <section id="parte3">
                  <article>
                    <label for="rendimiento" class="form-label">Rendimiento</label>
                    <input type="text" name="rendimiento" id="rendimiento" class="form-control" placeholder="" required>
                    <label for="proteinas" class="form-label">Proteinas</label>
                    <input type="text" name="proteinas" id="proteinas" class="form-control" placeholder="" required>
                    <label for="grasas" class="form-label">Grasas</label>
                    <input type="text" name="grasas" id="grasas" class="form-control" placeholder="" required>
                    <label  for="hidratoscarbono" class="form-label"> Hidratos de carbono</label>
                    <input type="text" name="hidratoscarbono" id="hidratoscarbon" class="form-control" placeholder="" required>
                  </article>
                  <article>
                    <button class="btn btn-warning m-3" onclick="btnAnterior3()">Anterior</button>
                    <button class="btn btn-info m-3" onclick="btnSiguiente3()">Siguiente</button>
                  </article>
                </section>
                <section id="parte4">
                  <article>
                    <label for="preparacion" class="form-label">Preparación</label>
                    <textarea class="form-control" name="preparacion" id="preparacion" placeholder="1.- Rebana las papas con la mandolina o con un cuchillo muy filoso para que queden muy delgadas. &#10;2.- Mezcla el resto de los ingredientes y marina ahí las rodajas de papa, por 10 minutos, moviendo constantemente&#10;3.- Prepara una charola con papel encerado y acomoda las rodajas de papa en ella, un poco separadas entre sí.&#10;4.- Hornea a 180OC durante 20 minutos o hasta que doren." required></textarea>
                    <label for="tipocomida">Tipo de comida</label>
                    <select  class="form-select" id="tipocomida" name="tipocomida" required>
                      <option value="" selected="selected">Seleccione...</option>
                      <option value="Desayuno">Desayuno</option>
                      <option value="Comida">Comida</option>
                      <option value="Cena">Cena</option>
                    </select>
                    
                    <input type="hidden" name="autor" id="autor" class="form-control" value="<?php echo $_SESSION['nombre'];  echo ' '; echo $_SESSION['apellidos']; ?>">
                    <label for="imagen" class="form-label"> Subir imagen</label>
                    <input type="file" name="imagen" id="imagen" class="form-control" required>
                  </article>
                  <article>
                    <button class="btn btn-warning m-3" onclick="btnAnterior4()">Anterior</button>
                    <button type="submit"  name="registrarplatillo" value="registrarplatillo" class="btn btn-primary">Registrar Platillo</button>
                  </article>
                </section>                
              </form>
            </section>
          </article>
          <article class="tab-pane fade " id="platillopublicado">
            <article style="background-color: #0C2233; color:aliceblue; padding: 0.5%;">
              <h3>Platillos Publicados</h3>
            </article>
            <section class="container p-2">
              <section class="row align-items-start">
                <?php
                  $Autor=$_SESSION['nombre'].' '.$_SESSION['apellidos'];
                  $x=0;
                  foreach($listaPlatillos as $platillo){ 
                    $autor= $platillo->getAutor();
                    if($Autor==$autor){
                      if($x<50){
                        printf('<article class="col-md-4">');
                          printf('<img class="card-img-top" src ="data:image/png;base64,'.base64_encode($platillo->getImagen()).'" width="220px" height="220px"/>');
                          printf('<h5 class="card-title" style="color: #22636D;">%s</h5>', $platillo->getNombre());
                        printf('</article>');
                        $x= $x + 1; 
                      }  
                    }        
                  } 
                ?>
              </section>
            </section>
          </article>
          <article class="tab-pane fade" id="editarplatillo">
            <article style="background-color: #0C2233; color:aliceblue; padding: 0.5%;">
              <h3>Consulta de Platillos Publicados</h3>
            </article>
            <article class="col-md-12 p-2 text-left mb-2">
                        <h5><b>Buscar</b></h5>
                        <input class="form-control me-2" type="text" id="busquedaPlatillo" placeholder="Buscar..." autocomplete="off">
                    </article>
                    <section class="table-responsive" id="resultadoBuscarPlatillo"></section>
            <section class="table-responsive" id="consultaPlatillos">
              <table class="table table-hover table-sm">
                <thead class="table-dark">
                  <tr>
                    <th scope="col">Número</th>
                    <th scope="col">Nombre</th>
                    <th scope="col">Tipo Comida</th>
                    <th scope="col">Autor</th>
                    <th scope="col">Imagen</th>
                    <th scope="col">Comentarios</th>
                    <th scope="col" colspan="2">Opciones</th>
                  </tr>
                </thead>
                <tbody>
                <?php
                  $numero=1;
                  $Autor=$_SESSION['nombre'].' '.$_SESSION['apellidos'];
                  foreach($listaPlatillos as $platillo) { 
                    $autor= $platillo->getAutor();
                    if($Autor==$autor){

                      printf('<tr>');
                        printf('<td>%s</td>', $platillo->getId()); 
                        $idPlatilloS= $platillo->getId();  
                        $_SESSION['idPlatilloS']=$idPlatilloS;   
                        printf('<td>%s</td>', $platillo->getNombre());
                        printf('<td>%s</td>', $platillo->getTipocomida());
                        printf('<td id="ingredientes-m">%s</td>', $platillo->getIngredientes());
                        printf('<td id="utencilios-m">%s</td>', $platillo->getUtencilios());
                        printf('<td id="tiempopreparacion-m">%s</td>', $platillo->getTiempopreparacion());
                        printf('<td id="caducidad-m">%s</td>', $platillo->getCaducidad());
                        printf('<td id="porciones-m">%s</td>', $platillo->getPorciones());
                        printf('<td id="energia-m">%s</td>', $platillo->getEnergia());
                        printf('<td id="costopromedio-m">%s</td>', $platillo->getCostopromedio());
                        printf('<td id="rendimiento-m">%s</td>', $platillo->getRendimiento());
                        printf('<td id="proteinas-m">%s</td>', $platillo->getProteinas());
                        printf('<td id="grasas-m">%s</td>', $platillo->getGrasas());
                        printf('<td id="hidratoscarbono-m">%s</td>', $platillo->getHidratoscarbono());
                        printf('<td id="preparacion-m">%s</td>', $platillo->getPreparacion());         
                        printf('<td>%s</td>', $platillo->getAutor());
                          printf('<td>'.'<img src ="data:image/png;base64,'.base64_encode($platillo->getImagen()).'" width="50px" height="50px"/>'.'</td>');                         
                        printf('<td><a class="text-primary" href="Javascript:comentarioPlatillo(%d)"><i class="bi bi-chat-left-dots-fill">
                          <span class="badge bg-warning rounded-pill"></span>

                        </i></a></td>', $platillo->getId()); 
                        printf('<td><a class="text-success editPlatillo" data-bs-toggle="modal" data-bs-target="#editarPlatillo" style="cursor:pointer;"><i class="bi bi-pencil-square"></i></td>');                                                 
                          printf('<td><a class="text-danger"  href="Javascript:eliminarPlatillo(%d)"><i class="bi bi-trash-fill"></i></a></td>', $platillo->getId());                                  
                        printf('</tr>');
                        $numero++;
                      }
                    } 
                  ?>
                </tbody>
              </table>
            </section>
            <!--- ------------------Modal de mofificar datos del Platillo ------------------------------------------------>
            <section class="modal fade" id="editarPlatillo" tabindex="-1" aria-hidden="true">
              <section class="modal-dialog modal-dialog-scrollable modal-lg ">
                <section class="modal-content">
                  <article class="modal-header " style="background: #FF5F6D;
                    background: -webkit-linear-gradient(to right, #FFC371, #FF5F6D); 
                    background: linear-gradient(to right, #FFC371, #FF5F6D);
                    color:white;">
                    <h5 class="modal-title w-100 text-center" style="font-weight:bold;">Editar Platillo</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close" ></button>
                  </article>
                  <section class="modal-body" style="font-weight: bold; color: #20B2AA;">
                    <form class="row g-3 needs-validation" action="cuenta" method="post" type="post" enctype="multipart/form-data">
                      <input type="hidden" name="idPlato" id="idPlato" >
                      <article class="col-md-6">
                        <label for="nombre" class="form-label">Nombre del Platillo</label>
                        <input type="text" name="nombre" id="nombre-platillo" class="form-control"
                        required>
                      </article>
                      <article class="col-md-6">
                        <label for="tipocomida">Tipo de comida</label>
                        <select  class="form-select" id="tipocomida-platillo" name="tipocomida"  required>
                          <option value="" selected="selected"></option>
                          <option value="Desayuno">Desayuno</option>
                          <option value="Comida">Comida</option>
                          <option value="Cena">Cena</option>
                        </select>
                      </article>
                      <article class="col-md-6">
                        <label for="ingredientes" class="form-label">Ingredientes</label>
                        <textarea name="ingredientes" id="ingredientes-platillo" class="form-control"  required></textarea>
                      </article>
                      <article class="col-md-6">
                        <label for="utencilios" class="form-label">Utencilios</label>
                        <textarea name="utencilios" id="utencilios-platillo" class="form-control" required></textarea>
                      </article>
                      <article class="col-md-6">
                        <label for="tiempo" class="form-label">Tiempo de preparación</label>
                        <input type="text" name="tiempopreparacion" id="tiempopreparacion-platillo" class="form-control" required >
                      </article>
                      <article class="col-md-6">
                        <label for="caducidad" class="form-label">Caducidad</label>
                        <input type="text" name="caducidad" id="caducidad-platillo" class="form-control" required>
                      </article>
                      <article class="col-md-6">
                        <label for="porciones" class="form-label">Porciones</label>
                        <input type="text" name="porciones" id="porciones-platillo" class="form-control" required>
                      </article>
                      <article class="col-md-6">
                        <label for="energia" class="form-label">Energia</label>
                        <input type="text" name="energia" id="energia-plarillo" class="form-control" required>
                      </article>
                      <article class="col-md-6">  
                        <label for="costo" class="form-label">Costo promedio</label>
                        <input type="text" name="costopromedio" id="costopromedio-platillo" class="form-control" required> 
                      </article>
                      <article class="col-md-6">
                        <label for="rendimiento" class="form-label">Rendimiento</label>
                        <input type="text" name="rendimiento" id="rendimiento-platillo" class="form-control" required>
                      </article>
                      <article class="col-md-6">
                        <label for="proteinas" class="form-label">Proteinas</label>
                        <input type="text" name="proteinas" id="proteinas-platillo" class="form-control" required>
                      </article>
                      <article class="col-md-6">
                        <label for="grasas" class="form-label">Grasas</label>
                        <input type="text" name="grasas" id="grasas-platillo" class="form-control" required>
                      </article>
                      <article class="col-md-6">
                        <label  for="hidratoscarbono" class="form-label"> Hidratos de carbono</label>
                        <input type="text" name="hidratoscarbono" id="hidratoscarbon-platillo" class="form-control" required>
                      </article>
                      <article class="col-md-6">
                        <label for="preparacion" class="form-label">Preparación</label>
                        <textarea class="form-control" name="preparacion" id="preparacion-platillo" required></textarea>
                      </article>
                      <article class="col-md-6">
                        <label for="autor" class="form-label">Autor</label>
                        <input type="text" name="autor" id="autor-platillo" class="form-control" required>
                      </article>
                      <article class="col-md-6"> 
                        <label for="imagen" class="form-label">Subir imagen solo si deseas actualizarlo</label>
                         <input type="file" name="imagenn" class="form-control">
                      </article>                                        
                      <article class="modal-footer" style="background-color: #74AECA1A;">                                           
                        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
                        <button type="submit" class="btn btn-success" name="editarPlato" value="editarPlato">Guardar Cambios</button>
                      </article>
                    </form>
                  </section>
                </section>
              </section>
            </section>
          </article>
        <!----------------------------Eliminar Platillo----------------------------------------- -->
        <form name="eliminarPlato" method="post" action="">
          <input type="hidden" name="idPlatillo" value="-1">
        </form>
        <!----------------------------Comentario de Platillo----------------------------------------- -->
        <form name="comentarioForm" method="post" action="">
          <input type="hidden" name="idComentario" value="-1">
        </form>
      </section>        
    </main>
  </section>
</section>


<!--Cerrar session -->                   

<form name="salirForm" method="post" action="">
  <input type="hidden" name="salirAction" id="salirAction" value="-1">
</form>

<script>
  //----------------------------Modificar Platillo----------------------------------------- -->

  $('.editPlatillo').on('click', function(){
    $tr=$(this).closest('tr');
    var datos=$tr.children("td").map(function(){
      return $(this).text();
    });
    $('#idPlato').val(datos[0]);
    $("#nombre-platillo").val(datos[1]);
    $("#tipocomida-platillo").val(datos[2]);
    $("#ingredientes-platillo").val(datos[3]);
    $("#utencilios-platillo").val(datos[4]);
    $("#tiempopreparacion-platillo").val(datos[5]);
    $("#caducidad-platillo").val(datos[6]);
    $("#porciones-platillo").val(datos[7]);
    $("#energia-plarillo").val(datos[8]);
    $("#costopromedio-platillo").val(datos[9]);
    $("#rendimiento-platillo").val(datos[10]);
    $("#proteinas-platillo").val(datos[11]);
    $("#grasas-platillo").val(datos[12]);
    $("#hidratoscarbon-platillo").val(datos[13]);
    $("#preparacion-platillo").val(datos[14]);

    $("#autor-platillo").val(datos[15]);
        //$("#imagen-platillo").val(datos[16]);

      });

    //--------------------------Eliminar platillo-----------------------------------------------
    function eliminarPlatillo(id) {
     Swal.fire({
      title: '¿Esta seguro de eliminar el Platillo',
      text: "¡No podrás revertir esto!",
      type: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#3085d6',
      cancelButtonColor: '#d33',
      cancelButtonText:'Cancelar',
      confirmButtonText: 'Si, Eliminar!'
    }).then((result) => {
      if (result.value) {
       document.forms['eliminarPlato'].elements['idPlatillo'].value = id;
       document.forms['eliminarPlato'].submit();

     }
   });
  }

  function comentarioPlatillo(id){
    document.forms['comentarioForm'].elements['idComentario'].value = id;
    document.forms['comentarioForm'].submit();
  }

  function salir(){
    document.forms['salirForm'].elements['salirAction'].value = 1;
    document.forms['salirForm'].submit();
  }

  /*Fucion para agregar dinamicamente inputs para el formulario*/

  function AgregarMas() {
    $("<section>").load("controlador/input-dinamico.php", function() {
      $("#valores-nutrimentales").append($(this).html());
    }); 
  }
      function BorrarRegistro() {
        $('section.lista-producto').each(function(index, item){
          jQuery(':checkbox', this).each(function () {
            if ($(this).is(':checked')) {
              $(item).remove();
            }
          });
        });
      }
</script>